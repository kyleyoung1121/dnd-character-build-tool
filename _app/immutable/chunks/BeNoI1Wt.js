import{au as R,h as B,C as F,k as te,aR as se,V as M,an as ae,ap as ie,aS as re,aT as ne,af as G,I as le,ae as fe,ah as W,W as oe,ar as O,as as de,ax as ce,ay as j,Y as b,Z as pe,al as ue,d as i,j as A,z as I,v as N,X as E,$ as h,_ as y,a0 as c,aw as he}from"./rn6nHgdH.js";import"./DsnmJJEf.js";import"./CLB9eUYX.js";import{a as S,e as ve}from"./ZJQv4x7Q.js";import{i as z}from"./Co363syM.js";import{e as ge,i as me}from"./CAQU5EIs.js";import{i as _e}from"./hD6VUnFp.js";import{p as ke}from"./Rsg3wwRt.js";import{s as We,a as be}from"./Cb9z2JfB.js";import{a as ye}from"./2B6LwRL0.js";import{g as $e}from"./BbUdCK9o.js";function Me($,m,v=!1,g=!1,x=!1){var n=$,p="";R(()=>{var l=te;if(p===(p=m()??"")){B&&F();return}if(l.nodes_start!==null&&(se(l.nodes_start,l.nodes_end),l.nodes_start=l.nodes_end=null),p!==""){if(B){M.data;for(var r=F(),_=r;r!==null&&(r.nodeType!==ae||r.data!=="");)_=r,r=ie(r);if(r===null)throw re(),ne;G(M,_),n=le(r);return}var u=p+"";v?u=`<svg>${u}</svg>`:g&&(u=`<math>${u}</math>`);var f=fe(u);if((v||g)&&(f=W(f)),G(W(f),f.lastChild),v||g)for(;W(f);)n.before(W(f));else n.before(f)}})}var xe=E('<div class="conflict-item svelte-1ddlxke"><div class="conflict-description svelte-1ddlxke"> </div> <div class="conflict-resolution svelte-1ddlxke"><strong>Resolution:</strong> </div></div>'),Ce=E('<div class="conflicts-list svelte-1ddlxke"></div> <div class="guidance-section svelte-1ddlxke"><p class="svelte-1ddlxke">Go to the highlighted tabs and make different selections to avoid duplicates.</p></div>',1),we=E('<div class="conflict-warning-container svelte-1ddlxke"><div class="conflict-warning svelte-1ddlxke"><button class="warning-header svelte-1ddlxke"><div class="header-content svelte-1ddlxke"><span class="warning-icon svelte-1ddlxke">⚠️</span> <h3 class="svelte-1ddlxke">Conflicts Detected</h3></div> <span class="expand-indicator svelte-1ddlxke"> </span></button> <!></div></div>');function Ge($,m){oe(m,!1);const[v,g]=We(),x=()=>be(ye,"$activeConflicts",v),n=I();let p=ke(m,"tabName",8,""),l=I(!1);function r(){A(l,!i(l))}function _(t){if(t.type==="spell_limit")return u(t);const s={skill:"Skill",proficiency:"Proficiency",language:"Language",feature:"Feature"}[t.type]||t.type,o=t.sources.map(e=>{if(e.startsWith("class:"))return`${e.split(":")[1]} class`;if(e.startsWith("bard."))return"Bard class";if(e.startsWith("fighter."))return"Fighter class";if(e.startsWith("cleric."))return"Cleric class";if(e.startsWith("rogue."))return"Rogue class";if(e.startsWith("ranger."))return"Ranger class";if(e.startsWith("wizard."))return"Wizard class";if(e.startsWith("sorcerer."))return"Sorcerer class";if(e.startsWith("warlock."))return"Warlock class";if(e.startsWith("paladin."))return"Paladin class";if(e.startsWith("barbarian."))return"Barbarian class";if(e.startsWith("monk."))return"Monk class";if(e.startsWith("druid."))return"Druid class";if(e.startsWith("race:")||e.startsWith("species:"))return`${e.split(":")[1]} species`;if(e.startsWith("high_elf."))return"High Elf species";if(e.startsWith("hill_dwarf."))return"Hill Dwarf species";if(e.startsWith("wood_elf."))return"Wood Elf species";if(e.startsWith("dark_elf."))return"Dark Elf species";if(e.startsWith("mountain_dwarf."))return"Mountain Dwarf species";if(e.startsWith("lightfoot_halfling."))return"Lightfoot Halfling species";if(e.startsWith("stout_halfling."))return"Stout Halfling species";if(e.startsWith("rock_gnome."))return"Rock Gnome species";if(e.startsWith("forest_gnome."))return"Forest Gnome species";if(e.startsWith("half_elf."))return"Half-Elf species";if(e.startsWith("half_orc."))return"Half-Orc species";if(e.startsWith("dragonborn."))return"Dragonborn species";if(e.startsWith("tiefling."))return"Tiefling species";if(e.startsWith("human."))return"Human species";if(e.startsWith("variant_human."))return"Variant Human species";if(e.startsWith("background:"))return`${e.split(":")[1]} background`;if(e.startsWith("feature:")){const d=e.split(":")[1];return d==="Skill Proficiencies"?e==="feature:Skill Proficiencies"?"Background skill selection":"Class skill selection":["Tool Proficiencies","Equipment","Languages","Criminal Contact","Shelter of the Faithful","False Identity","By Popular Demand","Rustic Hospitality","Position of Privilege"].includes(d)?"Background feature":e.includes("Keen Senses")?"Elf keen senses":e.includes("Lucky")?"Halfling lucky":e.includes("Brave")?"Halfling brave":e.includes("Draconic Ancestry")?"Dragonborn ancestry":e.includes("Fey Ancestry")?"Elf fey ancestry":e.includes("Skill Proficiencies")?"Class skill selection":`${d} feature`}return e});return`${s} "${t.value}" is granted by multiple sources: ${o.join(", ")}`}function u(t){return!t.violations||t.violations.length===0?"Spell limit violation detected":`Spell limits exceeded: ${t.violations.map(s=>{const o=s.level==="cantrips"?"cantrips":s.level==="leveled"?"leveled spells":`level ${s.level.replace("level","")} spells`;return`${s.selected}/${s.limit} ${o} (${s.excess} over limit)`}).join(", ")}`}function f(t){if(t.type==="spell_limit")return V(t);const a=$e(t);return a?`Go to the ${a.charAt(0).toUpperCase()+a.slice(1)} tab and select a different ${t.type} to resolve this conflict.`:"This conflict involves automatic grants. Consider changing your other selections."}function V(t){let a="Go to the Spells tab and deselect excess spells.";if(t.causes&&t.causes.length>0){const s=t.causes.join(", ");a+=` This was caused by: ${s}.`}return a}O(()=>(x(),ue(p())),()=>{A(n,x().conflicts.filter(t=>t.affectedTabs?.includes(p())??!1))}),O(()=>i(n),()=>{i(n).length>0}),de(),_e();var H=ce(),Y=j(H);{var q=t=>{var a=we(),s=h(a),o=h(s),e=y(h(o),2),d=h(e,!0);c(e),c(o);var K=y(o,2);{var U=C=>{var T=Ce(),P=j(T);ge(P,5,()=>i(n),me,(X,k)=>{var w=xe(),D=h(w),Z=h(D,!0);c(D);var L=y(D,2),J=y(h(L));c(L),c(w),R((Q,ee)=>{S(Z,Q),S(J,` ${ee??""}`)},[()=>(i(k),N(()=>_(i(k)))),()=>(i(k),N(()=>f(i(k))))]),b(X,w)}),c(P),he(2),b(C,T)};z(K,C=>{i(l)&&C(U)})}c(s),c(a),R(()=>S(d,i(l)?"−":"+")),ve("click",o,r),b(t,a)};z(Y,t=>{i(n),N(()=>i(n).length>0)&&t(q)})}b($,H),pe(),g()}export{Ge as C,Me as h};
