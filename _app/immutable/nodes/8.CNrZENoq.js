import"../chunks/DsnmJJEf.js";import"../chunks/CLB9eUYX.js";import{W as ut,ar as Ne,as as ct,X as v,Y as l,Z as pt,d as e,j as ge,z as be,at as Be,$ as n,v as a,_ as g,a0 as s,au as w,ax as fe,ay as ue,l as Ge,al as $e}from"../chunks/rn6nHgdH.js";import{g as Te,a as q,e as he}from"../chunks/ZJQv4x7Q.js";import{i as j}from"../chunks/Co363syM.js";import{e as F,i as L}from"../chunks/CAQU5EIs.js";import{s as Se}from"../chunks/BXwS9YYZ.js";import{s as Xe}from"../chunks/CHpWTfCS.js";import{i as ze,s as Ae}from"../chunks/COMRBWPk.js";import{i as _t}from"../chunks/hD6VUnFp.js";import{s as dt,a as mt}from"../chunks/Cb9z2JfB.js";import{c as De}from"../chunks/CIqA3WZi.js";import{a as ke}from"../chunks/Dnzb4z2X.js";import{b as Ye}from"../chunks/CI2IoGDg.js";import{g as gt,w as ft,s as ht,e as wt,r as qt,p as bt,m as St,d as kt,c as Et,a as Ct,b as yt,f as Ot}from"../chunks/BH-lYZvk.js";import{b as Ze}from"../chunks/BBGIyyDs.js";var Bt=v('<div class="no-selection svelte-1hulnwg"><h2 class="svelte-1hulnwg">No Class Selected</h2> <p class="svelte-1hulnwg">Please select a class first to see starting equipment options.</p> <a class="nav-link svelte-1hulnwg">Go to Class Selection</a></div>'),Rt=v('<div class="no-equipment svelte-1hulnwg"><h2 class="svelte-1hulnwg">Equipment Not Available</h2> <p class="svelte-1hulnwg"> </p></div>'),jt=v('<div class="equipment-item-pack class-equipment svelte-1hulnwg"><div class="pack-name svelte-1hulnwg"> </div> <div class="pack-description svelte-1hulnwg"> </div></div>'),Nt=v('<div class="equipment-item class-equipment svelte-1hulnwg"><span class="item-name svelte-1hulnwg"> </span></div>'),zt=v('<div class="equipment-group svelte-1hulnwg"><h3 class="svelte-1hulnwg">Standard Equipment</h3> <div class="equipment-list svelte-1hulnwg"></div></div>'),At=v('<div class="requirement-warning svelte-1hulnwg"> </div>'),Dt=v('<div class="item-detail svelte-1hulnwg"> </div>'),Ft=v('<div class="option-description svelte-1hulnwg"></div>'),Lt=v('<button><div class="option-content svelte-1hulnwg"><div class="option-label svelte-1hulnwg"> </div> <!> <!></div></button>'),Mt=v("<option> </option>"),Pt=v('<div class="weapon-selection"><select class="subchoice-select svelte-1hulnwg"><option> </option><!></select></div>'),Wt=v("<option> </option>"),Gt=v('<div class="simple-selection"><select class="subchoice-select svelte-1hulnwg"><option> </option><!></select></div>'),$t=v('<div class="subchoice-group svelte-1hulnwg"><h4 class="svelte-1hulnwg"> </h4> <p class="subchoice-description svelte-1hulnwg"> </p> <!></div>'),Tt=v('<div class="subchoices-container svelte-1hulnwg"></div>'),Xt=v('<div class="enhanced-choice svelte-1hulnwg"><div class="main-options svelte-1hulnwg"></div> <!></div>'),Yt=v("<option> </option>"),Zt=v('<div class="dropdown-container svelte-1hulnwg"><select class="equipment-dropdown svelte-1hulnwg"><option disabled>Choose an option...</option><!></select></div>'),Ht=v('<span class="option-item svelte-1hulnwg"> </span>'),Jt=v('<button class="choice-option svelte-1hulnwg"><div class="option-items svelte-1hulnwg"></div></button>'),Kt=v('<div class="choice-options svelte-1hulnwg"></div>'),Qt=v('<div class="equipment-group svelte-1hulnwg"><h3 class="svelte-1hulnwg"> </h3> <p class="choice-description svelte-1hulnwg"> </p> <!></div>'),Ut=v('<div class="equipment-section svelte-1hulnwg"><div class="section-header svelte-1hulnwg"><img class="class-icon svelte-1hulnwg"/> <h2 class="svelte-1hulnwg"> </h2></div> <!> <!></div>'),Vt=v('<div class="equipment-item background svelte-1hulnwg"><span class="item-name svelte-1hulnwg"> </span></div>'),xt=v('<div class="equipment-group svelte-1hulnwg"><h3 class="svelte-1hulnwg">Fixed Equipment</h3> <div class="equipment-list svelte-1hulnwg"></div></div>'),It=v("<option> </option>"),es=v('<div class="dropdown-container svelte-1hulnwg"><select class="equipment-dropdown svelte-1hulnwg"><option disabled>Choose an option...</option><!></select></div>'),ts=v('<span class="option-item svelte-1hulnwg"> </span>'),ss=v('<button><div class="option-items svelte-1hulnwg"></div></button>'),as=v('<div class="choice-options svelte-1hulnwg"></div>'),ns=v('<div class="equipment-group svelte-1hulnwg"><h3 class="svelte-1hulnwg"> </h3> <p class="choice-description svelte-1hulnwg"> </p> <!></div>'),is=v("<!> <!>",1),rs=v('<div class="equipment-item background svelte-1hulnwg"><span class="item-name svelte-1hulnwg"> </span></div>'),ls=v('<div class="equipment-group svelte-1hulnwg"><h3 class="svelte-1hulnwg">Background Equipment</h3> <div class="equipment-list svelte-1hulnwg"></div></div>'),os=v('<div class="equipment-section svelte-1hulnwg"><div class="section-header svelte-1hulnwg"><img class="background-icon svelte-1hulnwg"/> <h2 class="svelte-1hulnwg"> </h2></div> <!></div>'),vs=v('<div class="equipment-section svelte-1hulnwg"><h2>Background Equipment</h2> <p>Background equipment data is loading...</p></div>'),us=v('<div class="no-selection svelte-1hulnwg"><h2 class="svelte-1hulnwg">No Background Selected</h2> <p class="svelte-1hulnwg">Select a background to see additional starting equipment.</p> <a class="nav-link svelte-1hulnwg">Go to Background Selection</a></div>'),cs=v('<div class="main-content svelte-1hulnwg"><!> <!></div>');function Bs(He,Je){ut(Je,!1);const[Ke,Qe]=dt(),se=()=>mt(De,"$character_store",Ke),Ue={Fighter:Ot,Barbarian:yt,Bard:Ct,Cleric:Et,Druid:kt,Monk:St,Paladin:bt,Ranger:qt,Rogue:wt,Sorcerer:ht,Warlock:ft,Wizard:gt};let d=be(null),O=be(null),f=be({}),re=be({}),ce=be({}),pe=be({});function Ve(){if(!e(d)?.startingEquipment?.choices)return;const t=Te(De);if(!t._provenance)return;const i={};e(d).startingEquipment.choices.forEach((u,m)=>{const b=`class_equipment_${m}`,p=t._provenance[b];if(p&&Re(u)){const c=p._set||p;if(c.selectedOption!==void 0)i[m]={selectedOption:c.selectedOption,subChoiceSelections:c.subChoiceSelections||{}};else if(c.inventory){const M=c.inventory;for(let P=0;P<u.options.length;P++){const T=u.options[P];if(xe(T,M)){i[m]={selectedOption:P,subChoiceSelections:Ie(T,M)};break}}}}}),Object.keys(i).length>0&&ge(f,{...e(f),...i})}function xe(t,i){const u=[];if(t.items&&u.push(...t.items),t.subChoices)for(const m of t.subChoices)u.push(...m.options);return i.every(m=>u.includes(m))}function Ie(t,i){const u={};if(!t.subChoices)return u;for(const m of t.subChoices){const b=i.filter(p=>m.options.includes(p));b.length>0&&(u[m.name]=b)}return u}function et(t){if(t.includes("(includes:")){const i=t.match(/^(.+?)\s*\(includes:\s*(.+)\)$/);if(i)return{name:i[1].trim(),description:i[2].trim()}}return null}function tt(t){if(!t.requires||t.requires.length===0)return!0;const i=Te(De);return i.proficiencies?t.requires.every(u=>i.proficiencies.includes(u)):!1}function Re(t){return"options"in t&&t.options.length>0&&typeof t.options[0]=="object"&&"label"in t.options[0]}function st(t){return"options"in t&&t.options.length>0&&Array.isArray(t.options[0])}function Fe(t,i){if(!e(d))return;const m=e(d).startingEquipment.choices[t].options[i],b=`class_equipment_${t}`;ke(b,{inventory:m})}function at(t,i){if(!e(d))return;const m=e(d).startingEquipment.choices[t].options[i],b=`class_equipment_${t}`;ke(b,{inventory:[]});const p={...e(f)};p[t]={selectedOption:i,subChoiceSelections:{}},ge(f,p);const c={selectedOption:i,subChoiceSelections:{},inventory:[]};ke(b,c),m.items&&!m.subChoices&&(c.inventory=m.items,ke(b,c))}function Le(t,i,u){if(!e(d)||!e(f)[t])return;const m=e(d).startingEquipment.choices[t],b=e(f)[t].selectedOption;if(b===void 0)return;const p=m.options[b],c={...e(f)};c[t]={...e(f)[t],subChoiceSelections:{...e(f)[t].subChoiceSelections,[i]:u}},ge(f,c);const M=`class_equipment_${t}`,P={selectedOption:b,subChoiceSelections:c[t].subChoiceSelections,inventory:[]};if(p.subChoices?.every($=>c[t].subChoiceSelections[$.name]?.length>0)??!0){let $=[];if(p.items&&$.push(...p.items),p.subChoices&&c[t].subChoiceSelections)for(const ae of p.subChoices){const le=c[t].subChoiceSelections[ae.name];le&&$.push(...le)}P.inventory=$}ke(M,P)}function Me(t,i){if(!e(O)?.startingEquipment)return;Be(re,e(re)[t]=i);const m=e(O).startingEquipment.choices[t].options[i],b=`background_equipment_${t}`;ke(b,{inventory:m})}Ne(()=>(se(),e(d)),()=>{const t=se().class;ge(d,t?Ue[t]:null),e(d)&&Ve()}),Ne(()=>(se(),Ze),()=>{const t=se().background;ge(O,t&&Ze.find(i=>i.name===t)||null)}),Ne(()=>(e(d),e(f)),()=>{e(d)?.startingEquipment?.choices&&(ge(ce,{}),ge(pe,{}),e(d).startingEquipment.choices.forEach((t,i)=>{if(Re(t)&&e(f)[i]?.selectedOption!==void 0){const u=t.options[e(f)[i].selectedOption];Be(ce,e(ce)[i]=!!(u.subChoices&&u.subChoices.length>0)),Be(pe,e(pe)[i]=u.subChoices||[])}else Be(ce,e(ce)[i]=!1),Be(pe,e(pe)[i]=[])}))}),ct(),_t();var je=cs(),Pe=n(je);{var nt=t=>{var i=Bt(),u=g(n(i),4);s(i),w(()=>Se(u,"href",`${Ye??""}/class`)),l(t,i)},it=t=>{var i=fe(),u=ue(i);{var m=p=>{var c=Rt(),M=g(n(c),2),P=n(M);s(M),s(c),w(()=>q(P,`Starting equipment data is not yet available for ${se(),a(()=>se().class)??""}. This will be
				added soon!`)),l(p,c)},b=p=>{var c=Ut(),M=n(c),P=n(M),T=g(P,2),$=n(T);s(T),s(M);var ae=g(M,2);{var le=W=>{var o=zt(),_=g(n(o),2);F(_,5,()=>(e(d),a(()=>e(d).startingEquipment.fixed)),L,(x,X)=>{var ne=fe();const z=Ge(()=>(e(X),a(()=>et(e(X)))));var _e=ue(ne);{var Ce=ie=>{var C=jt(),y=n(C),R=n(y,!0);s(y);var J=g(y,2),K=n(J,!0);s(J),s(C),w(()=>{q(R,($e(e(z)),a(()=>e(z).name))),q(K,($e(e(z)),a(()=>e(z).description)))}),l(ie,C)},ye=ie=>{var C=Nt(),y=n(C),R=n(y,!0);s(y),s(C),w(()=>q(R,e(X))),l(ie,C)};j(_e,ie=>{e(z)?ie(Ce):ie(ye,!1)})}l(x,ne)}),s(_),s(o),l(W,o)};j(ae,W=>{e(d),a(()=>e(d).startingEquipment.fixed.length>0)&&W(le)})}var Ee=g(ae,2);F(Ee,1,()=>(e(d),a(()=>e(d).startingEquipment.choices)),L,(W,o,_)=>{var x=Qt(),X=n(x),ne=n(X,!0);s(X);var z=g(X,2),_e=n(z,!0);s(z);var Ce=g(z,2);{var ye=C=>{var y=Xt(),R=n(y);F(R,5,()=>(e(o),a(()=>e(o).options)),L,(N,h,G)=>{var r=Lt();const S=Ge(()=>(e(h),a(()=>tt(e(h)))));let B;var A=n(r),Y=n(A),de=n(Y,!0);s(Y);var Z=g(Y,2);{var Q=E=>{var k=At(),I=n(k);s(k),w(ee=>q(I,`Requires: ${ee??""}`),[()=>(e(h),a(()=>e(h).requires?.join(", ")))]),l(E,k)};j(Z,E=>{e(S)||E(Q)})}var me=g(Z,2);{var D=E=>{var k=Ft();F(k,5,()=>(e(h),a(()=>e(h).items)),L,(I,ee)=>{var oe=fe(),U=ue(oe);{var H=V=>{var te=Dt(),we=n(te,!0);s(te),w(()=>q(we,e(ee))),l(V,te)};j(U,V=>{e(ee),a(()=>e(ee).includes("(includes:"))&&V(H)})}l(I,oe)}),s(k),l(E,k)};j(me,E=>{e(h),a(()=>e(h).items&&e(h).items.length>0&&e(h).items.some(k=>k.includes("(includes:")))&&E(D)})}s(A),s(r),w(E=>{B=Xe(r,1,"choice-option svelte-1hulnwg",null,B,E),r.disabled=!e(S),q(de,(e(h),a(()=>e(h).label)))},[()=>({selected:e(f)[_]?.selectedOption===G,disabled:!e(S)})]),he("click",r,()=>e(S)&&at(_,G)),l(N,r)}),s(R);var J=g(R,2);{var K=N=>{var h=Tt();F(h,5,()=>(e(pe),a(()=>e(pe)[_])),L,(G,r)=>{var S=$t(),B=n(S),A=n(B,!0);s(B);var Y=g(B,2),de=n(Y,!0);s(Y);var Z=g(Y,2);{var Q=D=>{var E=Pt(),k=n(E),I=n(k),ee=n(I);s(I),I.value=I.__value="";var oe=g(I);F(oe,1,()=>(e(r),a(()=>e(r).options)),L,(H,V)=>{var te=Mt(),we=n(te,!0);s(te);var ve={};w(()=>{q(we,e(V)),ve!==(ve=e(V))&&(te.value=(te.__value=e(V))??"")}),l(H,te)}),s(k);var U;ze(k),s(E),w(H=>{q(ee,`Choose ${H??""}...`),U!==(U=(e(f),e(r),a(()=>e(f)[_]?.subChoiceSelections?.[e(r).name]?.[0]||"")))&&(k.value=(k.__value=(e(f),e(r),a(()=>e(f)[_]?.subChoiceSelections?.[e(r).name]?.[0]||"")))??"",Ae(k,(e(f),e(r),a(()=>e(f)[_]?.subChoiceSelections?.[e(r).name]?.[0]||""))))},[()=>(e(r),a(()=>e(r).name.toLowerCase()))]),he("change",k,H=>{const V=H.target;V.value&&Le(_,e(r).name,[V.value])}),l(D,E)},me=D=>{var E=fe(),k=ue(E);{var I=ee=>{var oe=Gt(),U=n(oe),H=n(U),V=n(H);s(H),H.value=H.__value="";var te=g(H);F(te,1,()=>(e(r),a(()=>e(r).options)),L,(ve,qe)=>{var Oe=Wt(),vt=n(Oe,!0);s(Oe);var We={};w(()=>{q(vt,e(qe)),We!==(We=e(qe))&&(Oe.value=(Oe.__value=e(qe))??"")}),l(ve,Oe)}),s(U);var we;ze(U),s(oe),w(ve=>{q(V,`Choose ${ve??""}...`),we!==(we=(e(f),e(r),a(()=>e(f)[_]?.subChoiceSelections?.[e(r).name]?.[0]||"")))&&(U.value=(U.__value=(e(f),e(r),a(()=>e(f)[_]?.subChoiceSelections?.[e(r).name]?.[0]||"")))??"",Ae(U,(e(f),e(r),a(()=>e(f)[_]?.subChoiceSelections?.[e(r).name]?.[0]||""))))},[()=>(e(r),a(()=>e(r).name.toLowerCase()))]),he("change",U,ve=>{const qe=ve.target;qe.value&&Le(_,e(r).name,[qe.value])}),l(ee,oe)};j(k,ee=>{e(r),a(()=>e(r).type==="simple-list")&&ee(I)},!0)}l(D,E)};j(Z,D=>{e(r),a(()=>e(r).type==="weapon-list")?D(Q):D(me,!1)})}s(S),w(()=>{q(A,(e(r),a(()=>e(r).name))),q(de,(e(r),a(()=>e(r).description)))}),l(G,S)}),s(h),l(N,h)};j(J,N=>{e(ce),a(()=>e(ce)[_])&&N(K)})}s(y),l(C,y)},ie=C=>{var y=fe(),R=ue(y);{var J=K=>{var N=fe(),h=ue(N);{var G=S=>{var B=Zt(),A=n(B),Y=n(A);Y.value=Y.__value="";var de=g(Y);F(de,1,()=>(e(o),a(()=>e(o).options)),L,(Z,Q,me)=>{var D=Yt(),E=n(D,!0);s(D),D.value=D.__value=me,w(k=>q(E,k),[()=>(e(Q),a(()=>e(Q).join(", ")))]),l(Z,D)}),s(A),A.value=A.__value="",s(B),he("change",A,Z=>{const Q=Z.target;Q.value&&Fe(_,parseInt(Q.value))}),l(S,B)},r=S=>{var B=Kt();F(B,5,()=>(e(o),a(()=>e(o).options)),L,(A,Y,de)=>{var Z=Jt(),Q=n(Z);F(Q,5,()=>e(Y),L,(me,D)=>{var E=Ht(),k=n(E,!0);s(E),w(()=>q(k,e(D))),l(me,E)}),s(Q),s(Z),he("click",Z,()=>Fe(_,de)),l(A,Z)}),s(B),l(S,B)};j(h,S=>{e(o),a(()=>e(o).options.length>3)?S(G):S(r,!1)})}l(K,N)};j(R,K=>{e(o),a(()=>st(e(o)))&&K(J)},!0)}l(C,y)};j(Ce,C=>{e(o),a(()=>Re(e(o)))?C(ye):C(ie,!1)})}s(x),w(()=>{q(ne,(e(o),a(()=>e(o).name))),q(_e,(e(o),a(()=>e(o).description)))}),l(W,x)}),s(c),w(()=>{Se(P,"src",(e(d),a(()=>e(d).image))),Se(P,"alt",(e(d),a(()=>e(d).name))),q($,`${e(d),a(()=>e(d).name)??""} Starting Equipment`)}),l(p,c)};j(u,p=>{e(d),a(()=>!e(d)?.startingEquipment)?p(m):p(b,!1)},!0)}l(t,i)};j(Pe,t=>{se(),a(()=>!se().class)?t(nt):t(it,!1)})}var rt=g(Pe,2);{var lt=t=>{var i=os(),u=n(i),m=n(u),b=g(m,2),p=n(b);s(b),s(u);var c=g(u,2);{var M=T=>{var $=is(),ae=ue($);{var le=W=>{var o=xt(),_=g(n(o),2);F(_,5,()=>(e(O),a(()=>e(O).startingEquipment.fixed)),L,(x,X)=>{var ne=Vt(),z=n(ne),_e=n(z,!0);s(z),s(ne),w(()=>q(_e,e(X))),l(x,ne)}),s(_),s(o),l(W,o)};j(ae,W=>{e(O),a(()=>e(O).startingEquipment.fixed.length>0)&&W(le)})}var Ee=g(ae,2);F(Ee,1,()=>(e(O),a(()=>e(O).startingEquipment.choices)),L,(W,o,_)=>{var x=ns(),X=n(x),ne=n(X,!0);s(X);var z=g(X,2),_e=n(z,!0);s(z);var Ce=g(z,2);{var ye=C=>{var y=es(),R=n(y),J=n(R);J.value=J.__value="";var K=g(J);F(K,1,()=>(e(o),a(()=>e(o).options)),L,(h,G,r)=>{var S=It(),B=n(S,!0);s(S),S.value=S.__value=r,w(A=>q(B,A),[()=>(e(G),a(()=>e(G).join(", ")))]),l(h,S)}),s(R);var N;ze(R),s(y),w(()=>{N!==(N=(e(re),a(()=>e(re)[_]??"")))&&(R.value=(R.__value=(e(re),a(()=>e(re)[_]??"")))??"",Ae(R,(e(re),a(()=>e(re)[_]??""))))}),he("change",R,h=>{const G=h.target;G.value&&Me(_,parseInt(G.value))}),l(C,y)},ie=C=>{var y=as();F(y,5,()=>(e(o),a(()=>e(o).options)),L,(R,J,K)=>{var N=ss();let h;var G=n(N);F(G,5,()=>e(J),L,(r,S)=>{var B=ts(),A=n(B,!0);s(B),w(()=>q(A,e(S))),l(r,B)}),s(G),s(N),w(r=>h=Xe(N,1,"choice-option svelte-1hulnwg",null,h,r),[()=>({selected:e(re)[_]===K})]),he("click",N,()=>Me(_,K)),l(R,N)}),s(y),l(C,y)};j(Ce,C=>{e(o),a(()=>e(o).options.length>3)?C(ye):C(ie,!1)})}s(x),w(()=>{q(ne,(e(o),a(()=>e(o).name))),q(_e,(e(o),a(()=>e(o).description)))}),l(W,x)}),l(T,$)},P=T=>{var $=ls(),ae=g(n($),2);F(ae,5,()=>(e(O),a(()=>e(O).equipment)),L,(le,Ee)=>{var W=rs(),o=n(W),_=n(o,!0);s(o),s(W),w(()=>q(_,e(Ee))),l(le,W)}),s(ae),s($),l(T,$)};j(c,T=>{e(O),a(()=>e(O).startingEquipment)?T(M):T(P,!1)})}s(i),w(()=>{Se(m,"src",(e(O),a(()=>e(O).image))),Se(m,"alt",(e(O),a(()=>e(O).name))),q(p,`${e(O),a(()=>e(O).name)??""} Equipment`)}),l(t,i)},ot=t=>{var i=fe(),u=ue(i);{var m=p=>{var c=vs();l(p,c)},b=p=>{var c=us(),M=g(n(c),4);s(c),w(()=>Se(M,"href",`${Ye??""}/background`)),l(p,c)};j(u,p=>{se(),a(()=>se().background)?p(m):p(b,!1)},!0)}l(t,i)};j(rt,t=>{e(O)?t(lt):t(ot,!1)})}s(je),l(He,je),pt(),Qe()}export{Bs as component};
