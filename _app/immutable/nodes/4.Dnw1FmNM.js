import"../chunks/DsnmJJEf.js";import"../chunks/CQMj6I71.js";import{h as Se,y as Ve,ah as R,ai as Ge,z as W,ao as de,A as y,B as Je,d as e,C as n,j as x,aj as w,ak as j,E as a,F as s,v as m,al as A,aN as Qe,an as Ae,aO as pe,aP as qe,aM as Ue,aQ as Ze}from"../chunks/D8epjS11.js";import{e as $,g as et,s as b}from"../chunks/BiH1rH3r.js";import{i as D,s as tt,a as it}from"../chunks/DNOeg3kL.js";import{a as st,e as Q,i as q}from"../chunks/Cf40ah7q.js";import{s as at}from"../chunks/Dmswp-gS.js";import{b as rt}from"../chunks/CJrJrPvA.js";import{i as ot}from"../chunks/nRLFwT7N.js";import{c as ae}from"../chunks/DANXc4Na.js";import{g as nt}from"../chunks/Bsd-rMGW.js";function We(N,O,ue,re){var U=N.__style;if(Se||U!==O){var g=st(O);(!Se||g!==N.getAttribute("style"))&&(g==null?N.removeAttribute("style"):N.style.cssText=g),N.__style=O}return re}var lt=W('<span class="ability-tag capitalize svelte-pr6v0o"> </span>'),ct=W('<div class="card class-recommendation-card mb-6 svelte-pr6v0o"><div class="class-rec-header svelte-pr6v0o"><h2 class="svelte-pr6v0o"> </h2></div> <div class="class-rec-content svelte-pr6v0o"><div class="priority-group svelte-pr6v0o"><span class="priority-label svelte-pr6v0o">Most Important:</span> <div class="ability-list svelte-pr6v0o"></div></div></div></div>'),vt=W("<option> </option>"),dt=W('<div class="grid grid-cols-5 items-center gap-4 border-b py-3 transition-colors hover:bg-gray-50 svelte-pr6v0o"><button class="ability-name-btn cursor-pointer text-center font-medium text-gray-800 capitalize transition-colors hover:text-indigo-600 hover:underline focus:text-indigo-600 focus:outline-none svelte-pr6v0o"> </button> <select class="w-full rounded border px-2 py-1 focus:ring-2 focus:ring-indigo-200 focus:outline-none svelte-pr6v0o"><option>--</option><!></select> <div class="text-center font-semibold text-gray-700 svelte-pr6v0o"><!></div> <div class="text-center font-semibold text-gray-800 svelte-pr6v0o"> </div> <div class="text-center font-mono font-bold text-indigo-600 svelte-pr6v0o"> </div></div>'),pt=W('<li class="svelte-pr6v0o"> </li>'),ut=W('<div class="ability-info-popup svelte-pr6v0o" role="dialog" tabindex="-1"><div class="popup-content svelte-pr6v0o"><div class="popup-header svelte-pr6v0o"><h3 class="popup-title svelte-pr6v0o"> </h3> <button class="popup-close svelte-pr6v0o">×</button></div> <div class="popup-body svelte-pr6v0o"><p class="popup-description svelte-pr6v0o"> </p> <div class="popup-section svelte-pr6v0o"><h4 class="popup-section-title svelte-pr6v0o"> </h4> <ul class="popup-affects-list svelte-pr6v0o"></ul></div></div></div></div>'),ft=W('<div class="popup-overlay svelte-pr6v0o"></div>'),mt=W('<div class="modifier-table-row svelte-pr6v0o"><span class="modifier-table-score svelte-pr6v0o"> </span> <span class="modifier-table-mod svelte-pr6v0o"> </span></div>'),ht=W(`<div class="ability-info-popup svelte-pr6v0o" role="dialog" tabindex="-1"><div class="popup-content svelte-pr6v0o"><div class="popup-header svelte-pr6v0o"><h3 class="popup-title svelte-pr6v0o">Ability Score Modifiers</h3> <button class="popup-close svelte-pr6v0o">×</button></div> <div class="popup-body svelte-pr6v0o"><p class="popup-description svelte-pr6v0o">Modifiers represent the bonus or penalty you add to dice rolls based on your ability
					scores.</p> <div class="popup-section svelte-pr6v0o"><div class="modifier-table svelte-pr6v0o"><div class="modifier-table-header svelte-pr6v0o"><span class="modifier-table-label svelte-pr6v0o">Score</span> <span class="modifier-table-label svelte-pr6v0o">Modifier</span></div> <!></div></div></div></div></div>`),gt=W('<div class="popup-overlay svelte-pr6v0o"></div>'),_t=W('<div class="spell-limit-warning-banner svelte-pr6v0o"><div class="warning-content svelte-pr6v0o"><div class="warning-icon svelte-pr6v0o">⚠️</div> <div class="warning-text svelte-pr6v0o"><h3 class="svelte-pr6v0o">Spell Limit Exceeded</h3> <p class="svelte-pr6v0o">Your Charisma modifier change has reduced your prepared spell limit. You currently have <strong> </strong> but can only prepare <strong> </strong>. Please visit the <a href="/spells" class="svelte-pr6v0o">Spells page</a> to remove <strong> </strong>.</p></div> <button class="warning-dismiss svelte-pr6v0o" title="Dismiss warning">×</button></div></div>'),yt=W('<div class="container svelte-pr6v0o"><!> <div class="card ability-card mt-4 svelte-pr6v0o"><div class="grid grid-cols-5 gap-4 border-b pb-2 font-bold text-gray-700 svelte-pr6v0o"><div class="text-center svelte-pr6v0o">Ability</div> <div class="text-center svelte-pr6v0o">Score</div> <div class="text-center svelte-pr6v0o">Species Bonus</div> <div class="text-center svelte-pr6v0o">Total</div> <div class="text-center svelte-pr6v0o"><button class="modifier-header-btn cursor-pointer transition-colors hover:text-indigo-600 hover:underline focus:text-indigo-600 focus:outline-none svelte-pr6v0o" title="Click for more information about modifiers">Modifier ℹ️</button></div></div> <!></div></div> <!> <!> <!> <!> <!>',1);function It(N,O){Ve(O,!1);const[ue,re]=tt(),U=()=>it(ae,"$character_store",ue),g=w(),T=w(),oe=w(),Z=w(),ee=w(),$e=[15,14,13,12,10,8],te=["strength","dexterity","constitution","intelligence","wisdom","charisma"],Pe={Barbarian:{abilities:["strength","constitution","dexterity"]},Bard:{abilities:["charisma","dexterity","constitution"]},Cleric:{abilities:["wisdom","constitution","strength"]},Druid:{abilities:["wisdom","constitution","dexterity"]},Fighter:{abilities:["strength","dexterity","constitution"]},Monk:{abilities:["dexterity","wisdom","constitution"]},Paladin:{abilities:["strength","charisma","constitution"]},Ranger:{abilities:["dexterity","wisdom","constitution"]},Rogue:{abilities:["dexterity","constitution","wisdom"]},Sorcerer:{abilities:["charisma","constitution","dexterity"]},Warlock:{abilities:["charisma","constitution","dexterity"]},Wizard:{abilities:["intelligence","constitution","dexterity"]}},K={strength:{title:"Strength",description:"Measures your character's physical power and raw muscle. Strength determines how much you can carry and influences melee weapon attacks.",affects:["Melee weapon attack rolls","Melee weapon damage rolls","Carrying capacity","Athletics skill checks","Jumping distance"]},dexterity:{title:"Dexterity",description:"Measures agility, reflexes, and balance. Dexterity affects your Armor Class, initiative, and ranged attacks.",affects:["Armor Class (when not wearing heavy armor)","Initiative rolls","Ranged weapon attacks","Acrobatics and Stealth skills","Dexterity saving throws"]},constitution:{title:"Constitution",description:"Measures health, stamina, and vital force. Constitution affects your hit points and resistance to disease and poison.",affects:["Hit points per level","Constitution saving throws","Concentration checks","Resistance to disease and poison","Death saving throws"]},intelligence:{title:"Intelligence",description:"Measures reasoning ability, memory, and analytical thinking. Intelligence determines your ability to learn and recall information.",affects:["Number of languages known","Investigation and History skills","Wizard spell preparation","Intelligence saving throws","General knowledge and reasoning"]},wisdom:{title:"Wisdom",description:"Measures awareness, intuition, and attunement to surroundings. Wisdom affects perception and insight into others.",affects:["Perception and Insight skills","Wisdom saving throws","Cleric and Druid spell preparation","Passive Perception","Animal Handling and Survival"]},charisma:{title:"Charisma",description:"Measures force of personality, leadership ability, and confidence. Charisma affects social interactions and certain spellcasting.",affects:["Social skill checks (Persuasion, Deception, Intimidation)","Charisma saving throws","Bard, Sorcerer, Warlock spells","Leadership and performance","Number of followers/hirelings"]}};let V=w(!1),k=w(null),H=w({x:0,y:0}),ie=w(!1),z=w({x:0,y:0}),se=w(!1),E=w({currentCount:0,newLimit:0,excessCount:0});function Ie(i,t){x(k,i);const o=350,r=20,p=window.innerWidth,l=window.innerHeight;let c=t.clientX+10,u=t.clientY-10;c+o>p-r&&(c=t.clientX-o-10),u<r&&(u=r),u>l-200&&(u=l-200),j(H,e(H).x=Math.max(r,c)),j(H,e(H).y=Math.max(r,u)),x(V,!0),document.addEventListener("keydown",fe)}function fe(i){i.key==="Escape"&&G()}function G(){x(V,!1),x(k,null),document.removeEventListener("keydown",fe)}function Le(i){const r=window.innerWidth,p=window.innerHeight;let l=i.clientX+10,c=i.clientY-10;l+300>r-20&&(l=i.clientX-300-10),c<20&&(c=20),c>p-300&&(c=p-300),j(z,e(z).x=Math.max(20,l)),j(z,e(z).y=Math.max(20,c)),x(ie,!0),document.addEventListener("keydown",me)}function me(i){i.key==="Escape"&&J()}function J(){x(ie,!1),document.removeEventListener("keydown",me)}function Ee(i,t){return i==="Rogue"&&t==="Arcane Trickster"?{abilities:["dexterity","constitution","intelligence"]}:Pe[i]||null}let d=w({strength:null,dexterity:null,constitution:null,intelligence:null,wisdom:null,charisma:null}),f=w({strength:0,dexterity:0,constitution:0,intelligence:0,wisdom:0,charisma:0});function he(i){return Math.floor((i-10)/2)}function Re(i){const t=he(i);return t>=0?`+${t}`:`${t}`}function De(){if(!e(g).spells||e(g).spells.length===0)return;const i=(e(d).charisma||10)+(e(f).charisma||0),t=he(i),o=Math.max(1,t+1),r={...e(g),charisma:i},p=nt(r),l=p.find(v=>v.source==="class"&&v.sourceName==="Paladin");if(!l||!l.chooseable)return;const c=p.filter(v=>v.source==="subclass"&&v.sourceName?.includes("Oath")).flatMap(v=>v.spells||[]),u=e(g).spells.filter(v=>!c.includes(v));if(u.length>o){const v=u.length-o;x(E,{currentCount:u.length,newLimit:o,excessCount:v}),x(se,!0)}else x(se,!1)}function He(){x(se,!1)}R(()=>U(),()=>{x(g,U())}),R(()=>e(g),()=>{x(T,e(g).class)}),R(()=>e(g),()=>{x(oe,e(g).subclass)}),R(()=>(e(T),e(oe)),()=>{x(Z,e(T)?Ee(e(T),e(oe)):null)}),R(()=>e(f),()=>{const t=et(ae)._provenance??{};x(f,{strength:0,dexterity:0,constitution:0,intelligence:0,wisdom:0,charisma:0});for(const o in t){const r=t[o]?._mods;if(r)for(const p of te)r[p]!=null&&j(f,e(f)[p]+=r[p])}}),R(()=>(e(g),e(d),e(f)),()=>{for(const i of te){const t=e(g)[i];t&&e(d)[i]===null&&j(d,e(d)[i]=t-(e(f)[i]||0))}}),R(()=>e(d),()=>{x(ee,Object.values(e(d)).filter(i=>i!==null))}),R(()=>(e(d),e(f),e(g),ae),()=>{const i={};let t=!1;for(const o of te)if(e(d)[o]!==null){const r=e(d)[o]+(e(f)[o]||0);e(g)[o]!==r&&(i[o]=r,t=!0)}t&&ae.update(o=>({...o,...i}))}),R(()=>(e(g),e(d)),()=>{e(g).class==="Paladin"&&e(d).charisma!==null&&De()}),Ge(),ot();var ge=yt(),ne=de(ge),_e=a(ne);{var ze=i=>{var t=ct(),o=a(t),r=a(o),p=a(r);s(r),s(o);var l=n(o,2),c=a(l),u=n(a(c),2);Q(u,5,()=>(e(Z),m(()=>e(Z).abilities)),q,(v,C)=>{var M=lt(),S=a(M,!0);s(M),A(()=>b(S,e(C))),y(v,M)}),s(u),s(c),s(l),s(t),A(()=>b(p,`${e(T)??""} Ability Recommendations`)),y(i,t)};D(_e,i=>{e(Z)&&i(ze)})}var ye=n(_e,2),le=a(ye),be=n(a(le),8),Be=a(be);s(be),s(le);var Ne=n(le,2);Q(Ne,1,()=>te,q,(i,t)=>{var o=dt(),r=a(o),p=a(r);s(r);var l=n(r,2);A(()=>{e(d),Qe(()=>{e(t),e(ee)})});var c=a(l);c.value=(c.__value=null)??"";var u=n(c);Q(u,1,()=>$e,q,(h,_)=>{var F=Ae(),ce=de(F);{var ve=I=>{var L=vt(),Ke=a(L,!0);s(L);var Me={};A(()=>{b(Ke,e(_)),Me!==(Me=e(_))&&(L.value=(L.__value=e(_))??"")}),y(I,L)};D(ce,I=>{e(ee),e(_),e(d),e(t),m(()=>!e(ee).includes(e(_))||e(d)[e(t)]===e(_))&&I(ve)})}y(h,F)}),s(l);var v=n(l,2),C=a(v);{var M=h=>{var _=pe();A(()=>b(_,`+${e(f),e(t),m(()=>e(f)[e(t)])??""}`)),y(h,_)},S=h=>{var _=Ae(),F=de(_);{var ce=I=>{var L=pe();A(()=>b(L,(e(f),e(t),m(()=>e(f)[e(t)])))),y(I,L)},ve=I=>{var L=pe("0");y(I,L)};D(F,I=>{e(f),e(t),m(()=>e(f)[e(t)]<0)?I(ce):I(ve,!1)},!0)}y(h,_)};D(C,h=>{e(f),e(t),m(()=>e(f)[e(t)]>0)?h(M):h(S,!1)})}s(v);var X=n(v,2),B=a(X,!0);s(X);var P=n(X,2),Y=a(P,!0);s(P),s(o),A(h=>{at(r,"title",`Click for more information about ${e(t)??""}`),b(p,`${e(t)??""} ℹ️`),b(B,(e(d),e(t),e(f),m(()=>e(d)[e(t)]!==null?e(d)[e(t)]+(e(f)[e(t)]??0):""))),b(Y,h)},[()=>(e(d),e(t),e(f),m(()=>e(d)[e(t)]!==null?Re(e(d)[e(t)]+(e(f)[e(t)]??0)):""))]),$("click",r,h=>Ie(e(t),h)),rt(l,()=>e(d)[e(t)],h=>j(d,e(d)[e(t)]=h)),y(i,o)}),s(ye),s(ne);var xe=n(ne,2);{var Xe=i=>{var t=ut(),o=a(t),r=a(o),p=a(r),l=a(p,!0);s(p);var c=n(p,2);s(r);var u=n(r,2),v=a(u),C=a(v,!0);s(v);var M=n(v,2),S=a(M),X=a(S);s(S);var B=n(S,2);Q(B,5,()=>(e(k),m(()=>K[e(k)].affects)),q,(P,Y)=>{var h=pt(),_=a(h,!0);s(h),A(()=>b(_,e(Y))),y(P,h)}),s(B),s(M),s(u),s(o),s(t),A(()=>{We(t,`left: ${e(H),m(()=>e(H).x)??""}px; top: ${e(H),m(()=>e(H).y)??""}px;`),b(l,(e(k),m(()=>K[e(k)].title))),b(C,(e(k),m(()=>K[e(k)].description))),b(X,`What ${e(k),m(()=>K[e(k)].title)??""} affects:`)}),$("click",c,G),$("click",t,G),$("keydown",t,P=>P.key==="Escape"&&G()),y(i,t)};D(xe,i=>{e(V),e(k),m(()=>e(V)&&e(k)&&K[e(k)])&&i(Xe)})}var we=n(xe,2);{var Ye=i=>{var t=ft();$("click",t,G),y(i,t)};D(we,i=>{e(V)&&i(Ye)})}var ke=n(we,2);{var je=i=>{var t=ht(),o=a(t),r=a(o),p=n(a(r),2);s(r);var l=n(r,2),c=n(a(l),2),u=a(c),v=n(a(u),2);Q(v,0,()=>[["8-9",-1],["10-11",0],["12-13",1],["14-15",2],["16-17",3],["18-19",4]],q,(C,M)=>{var S=qe(()=>Ze(M,2));let X=()=>e(S)[0],B=()=>e(S)[1];var P=mt(),Y=a(P),h=a(Y,!0);s(Y);var _=n(Y,2),F=a(_,!0);s(_),s(P),A(()=>{b(h,X()),b(F,B()>=0?"+"+B():B())}),y(C,P)}),s(u),s(c),s(l),s(o),s(t),A(()=>We(t,`left: ${e(z),m(()=>e(z).x)??""}px; top: ${e(z),m(()=>e(z).y)??""}px;`)),$("click",p,J),$("click",t,J),$("keydown",t,C=>C.key==="Escape"&&J()),y(i,t)};D(ke,i=>{e(ie)&&i(je)})}var Ce=n(ke,2);{var Fe=i=>{var t=gt();$("click",t,J),y(i,t)};D(Ce,i=>{e(ie)&&i(Fe)})}var Oe=n(Ce,2);{var Te=i=>{var t=_t(),o=a(t),r=n(a(o),2),p=n(a(r),2),l=n(a(p)),c=a(l);s(l);var u=n(l,2),v=a(u,!0);s(u);var C=n(u,4),M=a(C);s(C),Ue(),s(p),s(r);var S=n(r,2);s(o),s(t),A(()=>{b(c,`${e(E),m(()=>e(E).currentCount)??""} prepared spells`),b(v,(e(E),m(()=>e(E).newLimit))),b(M,`${e(E),m(()=>e(E).excessCount)??""} spell${e(E),m(()=>e(E).excessCount>1?"s":"")??""}`)}),$("click",S,He),y(i,t)};D(Oe,i=>{e(se)&&i(Te)})}$("click",Be,i=>Le(i)),y(N,ge),Je(),re()}export{It as component};
