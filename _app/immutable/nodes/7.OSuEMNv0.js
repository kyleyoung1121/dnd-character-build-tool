import"../chunks/DsnmJJEf.js";import"../chunks/69_IOA4Y.js";import{x as ie,af as Rt,ag as ne,y as l,z as r,A as re,a as t,s as ct,ah as _t,ai as Et,C as a,u as o,B as g,E as s,aj as q,al as kt,am as dt}from"../chunks/BPQ4JWg8.js";import{g as ve,s as h,e as pt}from"../chunks/7VHg90vh.js";import{i as M,s as le,a as ce}from"../chunks/kroobstV.js";import{e as A,i as z}from"../chunks/CDrqGHx5.js";import{s as mt}from"../chunks/Nh_3iQMt.js";import{s as Pt}from"../chunks/_s8Gduf-.js";import{i as At,s as zt}from"../chunks/7CfZzBoQ.js";import{i as pe}from"../chunks/yjxl5BeO.js";import{c as Wt}from"../chunks/Chv8qeEn.js";import{a as ft}from"../chunks/CHKTiq6q.js";import{b as Tt}from"../chunks/rCS-ogqs.js";import{g as ue,w as _e,s as de,e as me,r as fe,p as ge,m as je,d as qe,c as be,a as he,b as Se,f as Ee}from"../chunks/B7Eb6kEZ.js";import{b as $t}from"../chunks/BARndblr.js";var ke=l('<div class="no-selection svelte-jontoi"><h2 class="svelte-jontoi">No Class Selected</h2> <p class="svelte-jontoi">Please select a class first to see starting equipment options.</p> <a class="nav-link svelte-jontoi">Go to Class Selection</a></div>'),Ce=l('<div class="no-equipment svelte-jontoi"><h2 class="svelte-jontoi">Equipment Not Available</h2> <p class="svelte-jontoi"> </p></div>'),ye=l('<div class="equipment-item class-equipment svelte-jontoi"><span class="item-name svelte-jontoi"> </span></div>'),Oe=l('<div class="equipment-group svelte-jontoi"><h3 class="svelte-jontoi">Standard Equipment</h3> <div class="equipment-list svelte-jontoi"></div></div>'),we=l("<button> </button>"),Be=l("<option> </option>"),Ne=l('<div class="weapon-selection"><select class="subchoice-select svelte-jontoi"><option> </option><!></select></div>'),Re=l("<option> </option>"),Ae=l('<div class="simple-selection"><select class="subchoice-select svelte-jontoi"><option> </option><!></select></div>'),ze=l('<div class="subchoice-group svelte-jontoi"><h4 class="svelte-jontoi"> </h4> <p class="subchoice-description svelte-jontoi"> </p> <!></div>'),De=l('<div class="subchoices-container svelte-jontoi"></div>'),Fe=l('<div class="enhanced-choice svelte-jontoi"><div class="main-options svelte-jontoi"></div> <!></div>'),Le=l("<option> </option>"),Me=l('<div class="dropdown-container svelte-jontoi"><select class="equipment-dropdown svelte-jontoi"><option disabled>Choose an option...</option><!></select></div>'),Ge=l('<span class="option-item svelte-jontoi"> </span>'),Pe=l('<button class="choice-option svelte-jontoi"><div class="option-items svelte-jontoi"></div></button>'),We=l('<div class="choice-options svelte-jontoi"></div>'),Te=l('<div class="equipment-group svelte-jontoi"><h3 class="svelte-jontoi"> </h3> <p class="choice-description svelte-jontoi"> </p> <!></div>'),$e=l('<div class="equipment-section svelte-jontoi"><div class="section-header svelte-jontoi"><img class="class-icon svelte-jontoi"/> <h2 class="svelte-jontoi"> </h2></div> <!> <!></div>'),He=l('<div class="equipment-item background svelte-jontoi"><span class="item-name svelte-jontoi"> </span></div>'),Je=l('<div class="equipment-group svelte-jontoi"><h3 class="svelte-jontoi">Fixed Equipment</h3> <div class="equipment-list svelte-jontoi"></div></div>'),Ke=l("<option> </option>"),Qe=l('<div class="dropdown-container svelte-jontoi"><select class="equipment-dropdown svelte-jontoi"><option disabled>Choose an option...</option><!></select></div>'),Ue=l('<span class="option-item svelte-jontoi"> </span>'),Ve=l('<button><div class="option-items svelte-jontoi"></div></button>'),Xe=l('<div class="choice-options svelte-jontoi"></div>'),Ye=l('<div class="equipment-group svelte-jontoi"><h3 class="svelte-jontoi"> </h3> <p class="choice-description svelte-jontoi"> </p> <!></div>'),Ze=l("<!> <!>",1),xe=l('<div class="equipment-item background svelte-jontoi"><span class="item-name svelte-jontoi"> </span></div>'),Ie=l('<div class="equipment-group svelte-jontoi"><h3 class="svelte-jontoi">Background Equipment</h3> <div class="equipment-list svelte-jontoi"></div></div>'),ts=l('<div class="equipment-section svelte-jontoi"><div class="section-header svelte-jontoi"><img class="background-icon svelte-jontoi"/> <h2 class="svelte-jontoi"> </h2></div> <!></div>'),es=l('<div class="equipment-section svelte-jontoi"><h2>Background Equipment</h2> <p>Background equipment data is loading...</p></div>'),ss=l('<div class="no-selection svelte-jontoi"><h2 class="svelte-jontoi">No Background Selected</h2> <p class="svelte-jontoi">Select a background to see additional starting equipment.</p> <a class="nav-link svelte-jontoi">Go to Background Selection</a></div>'),os=l('<div class="main-content svelte-jontoi"><!> <!></div>');function qs(Ht,Jt){ie(Jt,!1);const[Kt,Qt]=le(),U=()=>ce(Wt,"$character_store",Kt),Ut={Fighter:Ee,Barbarian:Se,Bard:he,Cleric:be,Druid:qe,Monk:je,Paladin:ge,Ranger:fe,Rogue:me,Sorcerer:de,Warlock:_e,Wizard:ue};let d=_t(null),S=_t(null),f=_t({}),I=_t({}),it=_t({}),nt=_t({});function Vt(){if(!t(d)?.startingEquipment?.choices)return;const e=ve(Wt);if(!e._provenance)return;const n={};t(d).startingEquipment.choices.forEach((p,m)=>{const j=`class_equipment_${m}`,u=e._provenance[j];if(u&&yt(p)){const c=u._set||u;if(c.selectedOption!==void 0)n[m]={selectedOption:c.selectedOption,subChoiceSelections:c.subChoiceSelections||{}};else if(c.inventory){const C=c.inventory;for(let y=0;y<p.options.length;y++){const G=p.options[y];if(Xt(G,C)){n[m]={selectedOption:y,subChoiceSelections:Yt(G,C)};break}}}}}),Object.keys(n).length>0&&ct(f,{...t(f),...n})}function Xt(e,n){const p=[];if(e.items&&p.push(...e.items),e.subChoices)for(const m of e.subChoices)p.push(...m.options);return n.every(m=>p.includes(m))}function Yt(e,n){const p={};if(!e.subChoices)return p;for(const m of e.subChoices){const j=n.filter(u=>m.options.includes(u));j.length>0&&(p[m.name]=j)}return p}function yt(e){return"options"in e&&e.options.length>0&&typeof e.options[0]=="object"&&"label"in e.options[0]}function Zt(e){return"options"in e&&e.options.length>0&&Array.isArray(e.options[0])}function Dt(e,n){if(!t(d))return;const m=t(d).startingEquipment.choices[e].options[n],j=`class_equipment_${e}`;ft(j,{inventory:m})}function xt(e,n){if(!t(d))return;const m=t(d).startingEquipment.choices[e].options[n],j=`class_equipment_${e}`;ft(j,{inventory:[]});const u={...t(f)};u[e]={selectedOption:n,subChoiceSelections:{}},ct(f,u);const c={selectedOption:n,subChoiceSelections:{},inventory:[]};ft(j,c),m.items&&!m.subChoices&&(c.inventory=m.items,ft(j,c))}function Ft(e,n,p){if(!t(d)||!t(f)[e])return;const m=t(d).startingEquipment.choices[e],j=t(f)[e].selectedOption;if(j===void 0)return;const u=m.options[j],c={...t(f)};c[e]={...t(f)[e],subChoiceSelections:{...t(f)[e].subChoiceSelections,[n]:p}},ct(f,c);const C=`class_equipment_${e}`,y={selectedOption:j,subChoiceSelections:c[e].subChoiceSelections,inventory:[]};if(u.subChoices?.every(D=>c[e].subChoiceSelections[D.name]?.length>0)??!0){let D=[];if(u.items&&D.push(...u.items),u.subChoices&&c[e].subChoiceSelections)for(const V of u.subChoices){const st=c[e].subChoiceSelections[V.name];st&&D.push(...st)}y.inventory=D}ft(C,y)}function Lt(e,n){if(!t(S)?.startingEquipment)return;Et(I,t(I)[e]=n);const m=t(S).startingEquipment.choices[e].options[n],j=`background_equipment_${e}`;ft(j,{inventory:m})}Rt(()=>(U(),t(d)),()=>{const e=U().class;ct(d,e?Ut[e]:null),t(d)&&Vt()}),Rt(()=>(U(),$t),()=>{const e=U().background;ct(S,e&&$t.find(n=>n.name===e)||null)}),Rt(()=>(t(d),t(f)),()=>{t(d)?.startingEquipment?.choices&&(ct(it,{}),ct(nt,{}),t(d).startingEquipment.choices.forEach((e,n)=>{if(yt(e)&&t(f)[n]?.selectedOption!==void 0){const p=e.options[t(f)[n].selectedOption];Et(it,t(it)[n]=!!(p.subChoices&&p.subChoices.length>0)),Et(nt,t(nt)[n]=p.subChoices||[])}else Et(it,t(it)[n]=!1),Et(nt,t(nt)[n]=[])}))}),ne(),pe();var Ot=os(),Mt=a(Ot);{var It=e=>{var n=ke(),p=g(a(n),4);s(n),q(()=>mt(p,"href",`${Tt??""}/class`)),r(e,n)},te=e=>{var n=kt(),p=dt(n);{var m=u=>{var c=Ce(),C=g(a(c),2),y=a(C);s(C),s(c),q(()=>h(y,`Starting equipment data is not yet available for ${U(),o(()=>U().class)??""}. This will be
				added soon!`)),r(u,c)},j=u=>{var c=$e(),C=a(c),y=a(C),G=g(y,2),D=a(G);s(G),s(C);var V=g(C,2);{var st=O=>{var v=Oe(),_=g(a(v),2);A(_,5,()=>(t(d),o(()=>t(d).startingEquipment.fixed)),z,(H,J)=>{var K=ye(),P=a(K),rt=a(P,!0);s(P),s(K),q(()=>h(rt,t(J))),r(H,K)}),s(_),s(v),r(O,v)};M(V,O=>{t(d),o(()=>t(d).startingEquipment.fixed.length>0)&&O(st)})}var gt=g(V,2);A(gt,1,()=>(t(d),o(()=>t(d).startingEquipment.choices)),z,(O,v,_)=>{var H=Te(),J=a(H),K=a(J,!0);s(J);var P=g(J,2),rt=a(P,!0);s(P);var wt=g(P,2);{var Bt=W=>{var F=Fe(),w=a(F);A(w,5,()=>(t(v),o(()=>t(v).options)),z,(k,B,N)=>{var i=we();let b;var E=a(i,!0);s(i),q(R=>{b=Pt(i,1,"choice-option svelte-jontoi",null,b,R),h(E,(t(B),o(()=>t(B).label)))},[()=>({selected:t(f)[_]?.selectedOption===N})]),pt("click",i,()=>xt(_,N)),r(k,i)}),s(w);var tt=g(w,2);{var X=k=>{var B=De();A(B,5,()=>(t(nt),o(()=>t(nt)[_])),z,(N,i)=>{var b=ze(),E=a(b),R=a(E,!0);s(E);var et=g(E,2),jt=a(et,!0);s(et);var Y=g(et,2);{var Z=L=>{var $=Ne(),T=a($),vt=a(T),bt=a(vt);s(vt),vt.value=vt.__value="";var ht=g(vt);A(ht,1,()=>(t(i),o(()=>t(i).options)),z,(Q,ot)=>{var lt=Be(),Ct=a(lt,!0);s(lt);var at={};q(()=>{h(Ct,t(ot)),at!==(at=t(ot))&&(lt.value=(lt.__value=t(ot))??"")}),r(Q,lt)}),s(T);var x;At(T),s($),q(Q=>{h(bt,`Choose ${Q??""}...`),x!==(x=(t(f),t(i),o(()=>t(f)[_]?.subChoiceSelections?.[t(i).name]?.[0]||"")))&&(T.value=(T.__value=(t(f),t(i),o(()=>t(f)[_]?.subChoiceSelections?.[t(i).name]?.[0]||"")))??"",zt(T,(t(f),t(i),o(()=>t(f)[_]?.subChoiceSelections?.[t(i).name]?.[0]||""))))},[()=>(t(i),o(()=>t(i).name.toLowerCase()))]),pt("change",T,Q=>{const ot=Q.target;ot.value&&Ft(_,t(i).name,[ot.value])}),r(L,$)},qt=L=>{var $=kt(),T=dt($);{var vt=bt=>{var ht=Ae(),x=a(ht),Q=a(x),ot=a(Q);s(Q),Q.value=Q.__value="";var lt=g(Q);A(lt,1,()=>(t(i),o(()=>t(i).options)),z,(at,ut)=>{var St=Re(),ae=a(St,!0);s(St);var Gt={};q(()=>{h(ae,t(ut)),Gt!==(Gt=t(ut))&&(St.value=(St.__value=t(ut))??"")}),r(at,St)}),s(x);var Ct;At(x),s(ht),q(at=>{h(ot,`Choose ${at??""}...`),Ct!==(Ct=(t(f),t(i),o(()=>t(f)[_]?.subChoiceSelections?.[t(i).name]?.[0]||"")))&&(x.value=(x.__value=(t(f),t(i),o(()=>t(f)[_]?.subChoiceSelections?.[t(i).name]?.[0]||"")))??"",zt(x,(t(f),t(i),o(()=>t(f)[_]?.subChoiceSelections?.[t(i).name]?.[0]||""))))},[()=>(t(i),o(()=>t(i).name.toLowerCase()))]),pt("change",x,at=>{const ut=at.target;ut.value&&Ft(_,t(i).name,[ut.value])}),r(bt,ht)};M(T,bt=>{t(i),o(()=>t(i).type==="simple-list")&&bt(vt)},!0)}r(L,$)};M(Y,L=>{t(i),o(()=>t(i).type==="weapon-list")?L(Z):L(qt,!1)})}s(b),q(()=>{h(R,(t(i),o(()=>t(i).name))),h(jt,(t(i),o(()=>t(i).description)))}),r(N,b)}),s(B),r(k,B)};M(tt,k=>{t(it),o(()=>t(it)[_])&&k(X)})}s(F),r(W,F)},Nt=W=>{var F=kt(),w=dt(F);{var tt=X=>{var k=kt(),B=dt(k);{var N=b=>{var E=Me(),R=a(E),et=a(R);et.value=et.__value="";var jt=g(et);A(jt,1,()=>(t(v),o(()=>t(v).options)),z,(Y,Z,qt)=>{var L=Le(),$=a(L,!0);s(L),L.value=L.__value=qt,q(T=>h($,T),[()=>(t(Z),o(()=>t(Z).join(", ")))]),r(Y,L)}),s(R),R.value=R.__value="",s(E),pt("change",R,Y=>{const Z=Y.target;Z.value&&Dt(_,parseInt(Z.value))}),r(b,E)},i=b=>{var E=We();A(E,5,()=>(t(v),o(()=>t(v).options)),z,(R,et,jt)=>{var Y=Pe(),Z=a(Y);A(Z,5,()=>t(et),z,(qt,L)=>{var $=Ge(),T=a($,!0);s($),q(()=>h(T,t(L))),r(qt,$)}),s(Z),s(Y),pt("click",Y,()=>Dt(_,jt)),r(R,Y)}),s(E),r(b,E)};M(B,b=>{t(v),o(()=>t(v).options.length>3)?b(N):b(i,!1)})}r(X,k)};M(w,X=>{t(v),o(()=>Zt(t(v)))&&X(tt)},!0)}r(W,F)};M(wt,W=>{t(v),o(()=>yt(t(v)))?W(Bt):W(Nt,!1)})}s(H),q(()=>{h(K,(t(v),o(()=>t(v).name))),h(rt,(t(v),o(()=>t(v).description)))}),r(O,H)}),s(c),q(()=>{mt(y,"src",(t(d),o(()=>t(d).image))),mt(y,"alt",(t(d),o(()=>t(d).name))),h(D,`${t(d),o(()=>t(d).name)??""} Starting Equipment`)}),r(u,c)};M(p,u=>{t(d),o(()=>!t(d)?.startingEquipment)?u(m):u(j,!1)},!0)}r(e,n)};M(Mt,e=>{U(),o(()=>!U().class)?e(It):e(te,!1)})}var ee=g(Mt,2);{var se=e=>{var n=ts(),p=a(n),m=a(p),j=g(m,2),u=a(j);s(j),s(p);var c=g(p,2);{var C=G=>{var D=Ze(),V=dt(D);{var st=O=>{var v=Je(),_=g(a(v),2);A(_,5,()=>(t(S),o(()=>t(S).startingEquipment.fixed)),z,(H,J)=>{var K=He(),P=a(K),rt=a(P,!0);s(P),s(K),q(()=>h(rt,t(J))),r(H,K)}),s(_),s(v),r(O,v)};M(V,O=>{t(S),o(()=>t(S).startingEquipment.fixed.length>0)&&O(st)})}var gt=g(V,2);A(gt,1,()=>(t(S),o(()=>t(S).startingEquipment.choices)),z,(O,v,_)=>{var H=Ye(),J=a(H),K=a(J,!0);s(J);var P=g(J,2),rt=a(P,!0);s(P);var wt=g(P,2);{var Bt=W=>{var F=Qe(),w=a(F),tt=a(w);tt.value=tt.__value="";var X=g(tt);A(X,1,()=>(t(v),o(()=>t(v).options)),z,(B,N,i)=>{var b=Ke(),E=a(b,!0);s(b),b.value=b.__value=i,q(R=>h(E,R),[()=>(t(N),o(()=>t(N).join(", ")))]),r(B,b)}),s(w);var k;At(w),s(F),q(()=>{k!==(k=(t(I),o(()=>t(I)[_]??"")))&&(w.value=(w.__value=(t(I),o(()=>t(I)[_]??"")))??"",zt(w,(t(I),o(()=>t(I)[_]??""))))}),pt("change",w,B=>{const N=B.target;N.value&&Lt(_,parseInt(N.value))}),r(W,F)},Nt=W=>{var F=Xe();A(F,5,()=>(t(v),o(()=>t(v).options)),z,(w,tt,X)=>{var k=Ve();let B;var N=a(k);A(N,5,()=>t(tt),z,(i,b)=>{var E=Ue(),R=a(E,!0);s(E),q(()=>h(R,t(b))),r(i,E)}),s(N),s(k),q(i=>B=Pt(k,1,"choice-option svelte-jontoi",null,B,i),[()=>({selected:t(I)[_]===X})]),pt("click",k,()=>Lt(_,X)),r(w,k)}),s(F),r(W,F)};M(wt,W=>{t(v),o(()=>t(v).options.length>3)?W(Bt):W(Nt,!1)})}s(H),q(()=>{h(K,(t(v),o(()=>t(v).name))),h(rt,(t(v),o(()=>t(v).description)))}),r(O,H)}),r(G,D)},y=G=>{var D=Ie(),V=g(a(D),2);A(V,5,()=>(t(S),o(()=>t(S).equipment)),z,(st,gt)=>{var O=xe(),v=a(O),_=a(v,!0);s(v),s(O),q(()=>h(_,t(gt))),r(st,O)}),s(V),s(D),r(G,D)};M(c,G=>{t(S),o(()=>t(S).startingEquipment)?G(C):G(y,!1)})}s(n),q(()=>{mt(m,"src",(t(S),o(()=>t(S).image))),mt(m,"alt",(t(S),o(()=>t(S).name))),h(u,`${t(S),o(()=>t(S).name)??""} Equipment`)}),r(e,n)},oe=e=>{var n=kt(),p=dt(n);{var m=u=>{var c=es();r(u,c)},j=u=>{var c=ss(),C=g(a(c),4);s(c),q(()=>mt(C,"href",`${Tt??""}/background`)),r(u,c)};M(p,u=>{U(),o(()=>U().background)?u(m):u(j,!1)},!0)}r(e,n)};M(ee,e=>{t(S)?e(se):e(oe,!1)})}s(Ot),r(Ht,Ot),re(),Qt()}export{qs as component};
