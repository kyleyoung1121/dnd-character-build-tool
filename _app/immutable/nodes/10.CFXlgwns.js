import"../chunks/DsnmJJEf.js";import"../chunks/CQMj6I71.js";import{y as Ts,ah as W,ai as ws,z as F,A as C,B as Ds,d as e,E as N,j as x,aj as j,C as L,a8 as qe,v as p,F as g,ao as te,al as O,l as je,an as ge,aO as ze}from"../chunks/D8epjS11.js";import{s as R,e as Ne}from"../chunks/BiH1rH3r.js";import{i as T,s as Rs,a as ks}from"../chunks/DNOeg3kL.js";import{e as Ge,i as He}from"../chunks/Cf40ah7q.js";import{C as Ms,h as os}from"../chunks/B9K-xhhX.js";import{s as Je}from"../chunks/BUqHBage.js";import{i as Ps}from"../chunks/nRLFwT7N.js";import{c as Us,h as rs}from"../chunks/DANXc4Na.js";import{a as Ys}from"../chunks/CFTOOR2V.js";import{g as w,a as H,s as as}from"../chunks/Bsd-rMGW.js";function ns(Fe){return function(...Le){var ye=Le[0];return ye.stopPropagation(),Fe?.apply(this,Le)}}var Os=F(`<div class="no-spells svelte-h8m3je"><h2 class="svelte-h8m3je">ðŸš« No Spell Access</h2> <p>Your current class and race combination doesn't grant access to spells. Choose a
				spellcasting class or subclass to unlock the Spells tab!</p></div>`),Bs=F("<button> </button>"),Ks=F('<span class="selection-count svelte-h8m3je"><!></span>'),zs=F('<p class="section-description svelte-h8m3je"> </p>'),Gs=F('<p class="section-description svelte-h8m3je">Cantrips are simple spells that you can cast at will, without expending spell slots.</p>'),Hs=F(`<p class="section-description svelte-h8m3je">First-level spells require spell slots to cast. You regain all spell slots on a long
								rest.</p>`),Js=F(`<p class="section-description svelte-h8m3je">Second-level spells require spell slots to cast. You regain all spell slots on a
								long rest.</p>`),Qs=F('<h4 class="spell-subsection-header svelte-h8m3je"> </h4> <!>',1),Vs=F('<span class="auto-granted-indicator svelte-h8m3je">âœ“</span>'),Xs=F("<span> <!></span>"),Zs=F('<span class="spell-status unavailable-status svelte-h8m3je"> </span>'),Is=F('<button class="spell-button delete-button svelte-h8m3je">Delete</button>'),et=F('<button class="spell-button learn-button svelte-h8m3je"> </button>'),st=F('<span class="spell-status unavailable-status svelte-h8m3je">Duplicate</span>'),tt=F('<div class="spell-higher-level svelte-h8m3je"><strong>At Higher Levels:</strong> <!></div>'),lt=F('<div class="spell-details svelte-h8m3je"><div class="spell-level-school svelte-h8m3je"> </div> <div class="spell-meta svelte-h8m3je"><div><strong class="svelte-h8m3je">Casting Time:</strong> </div> <div><strong class="svelte-h8m3je">Range/Area:</strong> </div> <div><strong class="svelte-h8m3je">Components:</strong> </div> <div><strong class="svelte-h8m3je">Duration:</strong> </div></div> <div class="spell-description svelte-h8m3je"><!></div> <!></div>'),ot=F('<div><div class="spell-header svelte-h8m3je" role="button" tabindex="0"><div class="spell-title-section svelte-h8m3je"><!> <span class="spell-name svelte-h8m3je"> </span> <!></div> <!> <span class="expand-icon svelte-h8m3je"> </span></div> <!></div>'),rt=F('<!> <div class="spell-list svelte-h8m3je"></div>',1),at=F('<div class="spell-section svelte-h8m3je"><h3 class="svelte-h8m3je"> <!></h3> <!> <!></div>'),nt=F('<div class="spell-tabs svelte-h8m3je"></div> <!>',1),it=F('<div class="main-content svelte-h8m3je"><!> <!></div>');function gt(Fe,Le){Ts(Le,!1);const[ye,is]=Rs(),We=()=>ks(Us,"$character_store",ye),f=j(),$e=j(),Ee=j(),Te=j(),we=j(),m=j(),le=j(),ie=j(),V=j(),X=j(),k=j(),Qe=j(),Ve=j(),Xe=j(),Z=j(),M=j(),De=j(),d=j();function cs(t){return t.level===0?`${t.school} Cantrip`:`${t.level===1?"1st":t.level===2?"2nd":`${t.level}th`}-level ${t.school}`}function us(t){return t.join(", ")}function Ze(t){return t.replace(/\n/g,"<br>")}function $(t,a){const r=w(a),o=[],v=H(t);return r.forEach(l=>{if(l.chooseFrom&&l.chooseFrom.length>0){if(l.maxSpellLevel!==void 0&&t>l.maxSpellLevel)return;l.chooseFrom.forEach(n=>{v.filter(s=>s.classes.includes(n)).forEach(s=>{o.find(u=>u.name===s.name)||o.push({...s,source:l.source,sourceName:l.sourceName,chooseable:l.chooseable!==!1})})})}l.spells&&t>0&&l.spells.forEach(n=>{const i=as.find(s=>s.name===n&&s.level===t);if(i){const s=o.find(u=>u.name===i.name);s?l.source==="subclass"&&l.sourceName.includes("Oath")&&s.source==="class"&&(s.source=l.source,s.sourceName=l.sourceName,s.chooseable=l.chooseable!==!1):o.push({...i,source:l.source,sourceName:l.sourceName,chooseable:l.chooseable!==!1})}}),l.cantrips&&t===0&&l.cantrips.forEach(n=>{const i=as.find(s=>s.name===n&&s.level===0);if(i){const s=o.find(u=>u.name===i.name);s?l.source==="subclass"&&l.sourceName.includes("Oath")&&s.source==="class"&&(s.source=l.source,s.sourceName=l.sourceName,s.chooseable=l.chooseable!==!1):o.push({...i,source:l.source,sourceName:l.sourceName,chooseable:l.chooseable!==!1})}})}),o}function ps(t){const a=w(t),r={cantrips:0,level1:0,level2:0,sharedLeveled:0,isSharedLimits:!1};return a.forEach(o=>{if(o.chooseable!==!1){const v=o.source==="class"||o.source==="subclass"||o.source==="feature";if(o.chooseCantripCount!==void 0||o.chooseSpellCount!==void 0){if(o.chooseFrom&&o.chooseFrom.length>0){const l=H(0).some(s=>o.chooseFrom.some(u=>s.classes.includes(u))),n=(o.maxSpellLevel===void 0||o.maxSpellLevel>=1)&&H(1).some(s=>o.chooseFrom.some(u=>s.classes.includes(u))),i=(o.maxSpellLevel===void 0||o.maxSpellLevel>=2)&&H(2).some(s=>o.chooseFrom.some(u=>s.classes.includes(u)));l&&o.chooseCantripCount!==void 0&&v&&(r.cantrips+=o.chooseCantripCount),o.chooseSpellCount!==void 0&&v&&(n&&i?(r.isSharedLimits=!0,r.sharedLeveled+=o.chooseSpellCount):(n&&(r.level1+=o.chooseSpellCount),i&&(r.level2+=o.chooseSpellCount)))}}else if(o.chooseCount&&v&&o.chooseFrom&&o.chooseFrom.length>0){const l=H(0).some(s=>o.chooseFrom.some(u=>s.classes.includes(u))),n=(o.maxSpellLevel===void 0||o.maxSpellLevel>=1)&&H(1).some(s=>o.chooseFrom.some(u=>s.classes.includes(u))),i=(o.maxSpellLevel===void 0||o.maxSpellLevel>=2)&&H(2).some(s=>o.chooseFrom.some(u=>s.classes.includes(u)));l&&(r.cantrips+=o.chooseCount),n&&i?(r.isSharedLimits=!0,r.sharedLeveled+=o.chooseCount):(n&&(r.level1+=o.chooseCount),i&&(r.level2+=o.chooseCount))}}}),r}let _=j(new Set),B=j(new Set),h=j("");function Ie(t,a,r){a&&(!e(_).has(t)&&!ss(e(h),r)||(e(_).has(t)?e(_).delete(t):e(_).add(t),x(_,e(_)),vs()))}function es(t){e(B).has(t)?e(B).delete(t):e(B).add(t),x(B,e(B))}function vs(){const t="spell_selections",a={spells:Array.from(e(_))};Ys(t,a)}function fs(){const t=We();if(!t._provenance)return;const r=t._provenance["spell_selections"];if(r){const o=r._set||r;o.spells&&Array.isArray(o.spells)&&x(_,new Set(o.spells))}}function hs(t,a){if(t===0)return"Learn";const r=a.class;return r&&["Cleric","Druid","Paladin"].includes(r)?"Prepare":"Learn"}function ms(t){const a=w(t),r=[];a.forEach(s=>{s.source==="race"&&(s.spells&&s.spells.length>0||s.cantrips&&s.cantrips.length>0||s.chooseFrom&&s.chooseFrom.length>0)&&r.push({id:`${s.source}-${s.sourceName}`,name:s.sourceName,type:"race",sourceName:s.sourceName,requiresChoices:s.chooseable===!0})}),a.forEach(s=>{s.source==="subclass"&&(s.spells&&s.spells.length>0||s.cantrips&&s.cantrips.length>0||s.chooseFrom&&s.chooseFrom.length>0)&&r.push({id:`${s.source}-${s.sourceName}`,name:s.sourceName,type:"subclass",sourceName:s.sourceName,requiresChoices:s.chooseable===!0})}),a.forEach(s=>{s.source==="feature"&&(s.spells&&s.spells.length>0||s.cantrips&&s.cantrips.length>0||s.chooseFrom&&s.chooseFrom.length>0)&&r.push({id:`${s.source}-${s.sourceName}`,name:s.sourceName,type:"feature",sourceName:s.sourceName,requiresChoices:s.chooseable===!0})});const o=a.filter(s=>s.source==="subclass"&&s.chooseable&&(s.chooseCantripCount??0)>0&&(s.chooseSpellCount??0)>0).map(s=>s.sourceName),v=a.some(s=>(s.source==="class"||s.source==="subclass"&&!o.includes(s.sourceName)||s.source==="feature")&&s.chooseable&&((s.chooseCantripCount??0)>0||s.chooseFrom&&H(0).some(u=>s.chooseFrom.some(b=>u.classes.includes(b))))),l=a.some(s=>(s.source==="class"||s.source==="subclass"&&!o.includes(s.sourceName)||s.source==="feature")&&s.chooseable&&((s.chooseSpellCount??0)>0||s.chooseFrom&&H(1).some(u=>s.chooseFrom.some(b=>u.classes.includes(b))))),n=a.some(s=>(s.source==="class"||s.source==="subclass"&&!o.includes(s.sourceName)||s.source==="feature")&&s.chooseable&&((s.chooseSpellCount??0)>0||s.chooseFrom&&H(2).some(u=>s.chooseFrom.some(b=>u.classes.includes(b)))));return v&&r.push({id:"cantrips",name:"Cantrips",type:"level",level:0,requiresChoices:!0}),l&&r.push({id:"level1",name:"1st Level",type:"level",level:1,requiresChoices:!0}),n&&r.push({id:"level2",name:"2nd Level",type:"level",level:2,requiresChoices:!0}),r.filter(s=>xe(t,s.id).length>0)}function xe(t,a){if(a==="cantrips")return $(0,t).filter(r=>r.source==="class"||r.source==="subclass"||r.source==="feature");if(a==="level1")return $(1,t).filter(r=>r.source==="class"||r.source==="subclass"||r.source==="feature");if(a==="level2")return $(2,t).filter(r=>r.source==="class"||r.source==="subclass"||r.source==="feature");if(a.startsWith("race-")){const r=a.replace("race-",""),v=w(t).find(l=>l.source==="race"&&l.sourceName===r);if(!v)return[];if(v.chooseable&&v.chooseFrom){const l=[];if((v.chooseCantripCount??0)>0){const n=$(0,t).filter(i=>i.source==="race"&&i.sourceName===r);l.push(...n)}if((v.chooseSpellCount??0)>0){const n=$(1,t).filter(s=>s.source==="race"&&s.sourceName===r),i=$(2,t).filter(s=>s.source==="race"&&s.sourceName===r);l.push(...n,...i)}return l}else{const l=$(0,t).filter(s=>s.source==="race"&&s.sourceName===r),n=$(1,t).filter(s=>s.source==="race"&&s.sourceName===r),i=$(2,t).filter(s=>s.source==="race"&&s.sourceName===r);return[...l,...n,...i]}}else if(a.startsWith("subclass-")){const r=a.replace("subclass-","");if(!w(t).find(s=>s.source==="subclass"&&s.sourceName===r))return[];const l=$(0,t).filter(s=>s.source==="subclass"&&s.sourceName===r).map(s=>({...s,spellSection:"cantrips"})),n=$(1,t).filter(s=>s.source==="subclass"&&s.sourceName===r).map(s=>({...s,spellSection:"level1"})),i=$(2,t).filter(s=>s.source==="subclass"&&s.sourceName===r).map(s=>({...s,spellSection:"level2"}));return[...l,...n,...i]}else if(a.startsWith("feature-")){const r=a.replace("feature-","");if(!w(t).find(s=>s.source==="feature"&&s.sourceName===r))return[];const l=$(0,t).filter(s=>s.source==="feature"&&s.sourceName===r),n=$(1,t).filter(s=>s.source==="feature"&&s.sourceName===r),i=$(2,t).filter(s=>s.source==="feature"&&s.sourceName===r);return[...l,...n,...i]}return[]}function ds(t){x(h,t)}function bs(t,a){const r=xe(t,a);if(r.length===0)return!0;const o=r.filter(v=>v.chooseable);if(o.length===0)return!0;if(a.startsWith("race-")){const v=a.replace("race-",""),n=w(t).find(S=>S.source==="race"&&S.sourceName===v);if(!n||!n.chooseable)return!0;const i=o.filter(S=>e(_).has(S.name)).length,s=n.chooseCantripCount??0,u=n.chooseSpellCount??0,b=s+u;return i>=b}if(a.startsWith("subclass-")){const v=a.replace("subclass-",""),n=w(t).find(S=>S.source==="subclass"&&S.sourceName===v);if(!n||!n.chooseable)return!0;const i=o.filter(S=>e(_).has(S.name)).length,s=n.chooseCantripCount??0,u=n.chooseSpellCount??0,b=s+u;return i>=b}if(a.startsWith("feature-")){const v=a.replace("feature-",""),n=w(t).find(S=>S.source==="feature"&&S.sourceName===v);if(!n||!n.chooseable)return!0;const i=o.filter(S=>e(_).has(S.name)).length,s=n.chooseCantripCount??0,u=n.chooseSpellCount??0,b=s+u;return i>=b}return a==="cantrips"?o.filter(l=>e(_).has(l.name)).length>=e(m).cantrips:a==="level1"?e(m).isSharedLimits?e(k)>=e(m).sharedLeveled:o.filter(l=>e(_).has(l.name)).length>=e(m).level1:a==="level2"?e(m).isSharedLimits?e(k)>=e(m).sharedLeveled:o.filter(l=>e(_).has(l.name)).length>=e(m).level2:!1}function Ss(t,a){const v=xe(t,a).filter(l=>l.chooseable).filter(l=>e(_).has(l.name)).length;if(a.startsWith("race-")){const l=a.replace("race-",""),i=w(t).find(S=>S.source==="race"&&S.sourceName===l);if(!i||!i.chooseable)return null;const s=i.chooseCantripCount||0,u=i.chooseSpellCount||0,b=s+u;return{selected:v,total:b}}else if(a.startsWith("subclass-")){const l=a.replace("subclass-",""),i=w(t).find(S=>S.source==="subclass"&&S.sourceName===l);if(!i||!i.chooseable)return null;const s=i.chooseCantripCount||0,u=i.chooseSpellCount||0,b=s+u;return{selected:v,total:b}}else if(a.startsWith("feature-")){const l=a.replace("feature-",""),i=w(t).find(S=>S.source==="feature"&&S.sourceName===l);if(!i||!i.chooseable)return null;const s=i.chooseCantripCount||0,u=i.chooseSpellCount||0,b=s+u;return{selected:v,total:b}}else{if(a==="cantrips")return{selected:e(ie),total:e(m).cantrips};if(a==="level1")return e(m).isSharedLimits?{selected:e(k),total:e(m).sharedLeveled,shared:!0}:{selected:e(V),total:e(m).level1};if(a==="level2")return e(m).isSharedLimits?{selected:e(k),total:e(m).sharedLeveled,shared:!0}:{selected:e(X),total:e(m).level2}}return null}function Cs(t){return t==="cantrips"?"Cantrips are simple spells that you can cast at will, without expending spell slots.":t==="level1"?"First-level spells require spell slots to cast. You regain all spell slots on a long rest.":t==="level2"?"Second-level spells require spell slots to cast. You regain all spell slots on a long rest.":t.startsWith("race-")?`Spells granted by your ${t.replace("race-","")} heritage.`:t.startsWith("subclass-")?`Spells granted by your ${t.replace("subclass-","")} features.`:t.startsWith("feature-")?`Spells granted by your ${t.replace("feature-","")} feature.`:""}function _s(t,a){const r=new Set,o=w(t),v=a.startsWith("race-")?"race":a.startsWith("subclass-")?"subclass":a.startsWith("feature-")?"feature":"class",l=a.startsWith("race-")?a.replace("race-",""):a.startsWith("subclass-")?a.replace("subclass-",""):a.startsWith("feature-")?a.replace("feature-",""):null;o.forEach(n=>{if(!n.chooseable){const i=v==="class",s=n.source!==v||l&&n.sourceName!==l,u=i&&n.source==="subclass";(s||u)&&(n.spells&&n.spells.forEach(b=>r.add(b)),n.cantrips&&n.cantrips.forEach(b=>r.add(b)))}});for(let n=0;n<=2;n++)$(n,t).forEach(s=>{e(_).has(s.name)&&(s.source!==v||l&&s.sourceName!==l)&&r.add(s.name)});return r}function ss(t,a){if(t==="cantrips")return e(Qe);if(t==="level1")return e(Ve);if(t==="level2")return e(Xe);if(t.startsWith("race-")||t.startsWith("subclass-")||t.startsWith("feature-")){if(t===e(h)&&e(d)){if(e(d).cantrips&&e(d).spells&&a){if(a.spellSection==="cantrips")return e(d).cantrips.selected<e(d).cantrips.total;if(a.spellSection==="level1"||a.spellSection==="level2")return e(d).spells.selected<e(d).spells.total}return e(d).selected<e(d).total}const r=Ss(e(f),t);return r?r.selected<r.total:!1}return!1}function gs(t,a){const r=w(a);for(const o of r)if(!o.chooseable&&(o.spells&&o.spells.includes(t)||o.cantrips&&o.cantrips.includes(t)))return o.source==="subclass"&&o.sourceName.includes("Oath")?`${o.sourceName} (auto)`:o.source==="subclass"&&(o.sourceName.includes("Domain")||o.sourceName.includes("Circle"))?"Always Prepared":"Already Known";return"Already Known"}W(()=>We(),()=>{x(f,We())}),W(()=>e(f),()=>{x($e,w(e(f)))}),W(()=>e(f),()=>{x(Ee,e(f).class?$(0,e(f)):[])}),W(()=>e(f),()=>{x(Te,e(f).class?$(1,e(f)):[])}),W(()=>e(f),()=>{x(we,e(f).class?$(2,e(f)):[])}),W(()=>e(f),()=>{x(m,ps(e(f)))}),W(()=>e(f),()=>{e(f)&&fs()}),W(()=>(e(f),e($e)),()=>{x(le,e(f).class?e($e).filter(t=>t.source==="subclass"&&t.chooseable&&(t.chooseCantripCount??0)>0&&(t.chooseSpellCount??0)>0).map(t=>t.sourceName):[])}),W(()=>(e(Ee),e(_),e(le)),()=>{x(ie,e(Ee).filter(t=>t.chooseable&&e(_).has(t.name)&&(t.source==="class"||t.source==="subclass"&&!e(le).includes(t.sourceName)||t.source==="feature")).length)}),W(()=>(e(Te),e(_),e(le)),()=>{x(V,e(Te).filter(t=>t.chooseable&&e(_).has(t.name)&&(t.source==="class"||t.source==="subclass"&&!e(le).includes(t.sourceName)||t.source==="feature")).length)}),W(()=>(e(we),e(_),e(le)),()=>{x(X,e(we).filter(t=>t.chooseable&&e(_).has(t.name)&&(t.source==="class"||t.source==="subclass"&&!e(le).includes(t.sourceName)||t.source==="feature")).length)}),W(()=>(e(V),e(X)),()=>{x(k,e(V)+e(X))}),W(()=>(e(ie),e(m)),()=>{x(Qe,e(ie)<e(m).cantrips)}),W(()=>(e(m),e(k),e(V)),()=>{x(Ve,e(m).isSharedLimits?e(k)<e(m).sharedLeveled:e(V)<e(m).level1)}),W(()=>(e(m),e(k),e(X)),()=>{x(Xe,e(m).isSharedLimits?e(k)<e(m).sharedLeveled:e(X)<e(m).level2)}),W(()=>e(f),()=>{x(Z,e(f).class?ms(e(f)):[])}),W(()=>(e(Z),e(h)),()=>{e(Z).length>0&&(!e(h)||!e(Z).find(t=>t.id===e(h)))&&x(h,e(Z)[0].id)}),W(()=>(e(h),e(f)),()=>{x(M,e(h)?xe(e(f),e(h)):[])}),W(()=>(e(h),e(f)),()=>{x(De,e(h)?_s(e(f),e(h)):new Set)}),W(()=>(e(h),e(M),e(_),e(f),e(ie),e(m),e(k),e(V),e(X)),()=>{x(d,(()=>{if(!e(h))return null;const t=e(M),r=t.filter(o=>o.chooseable).filter(o=>e(_).has(o.name)).length;if(e(h).startsWith("race-")){const o=e(h).replace("race-",""),l=w(e(f)).find(u=>u.source==="race"&&u.sourceName===o);if(!l||!l.chooseable)return null;const n=l.chooseCantripCount??0,i=l.chooseSpellCount??0,s=n+i;return{selected:r,total:s}}else if(e(h).startsWith("subclass-")){const o=e(h).replace("subclass-",""),l=w(e(f)).find(s=>s.source==="subclass"&&s.sourceName===o);if(!l||!l.chooseable)return null;const n=l.chooseCantripCount??0,i=l.chooseSpellCount??0;if(n>0&&i>0){const s=t.filter(K=>K.spellSection==="cantrips"),u=t.filter(K=>K.spellSection==="level1"||K.spellSection==="level2"),b=s.filter(K=>e(_).has(K.name)).length,S=u.filter(K=>e(_).has(K.name)).length;return{selected:b+S,total:n+i,cantrips:{selected:b,total:n},spells:{selected:S,total:i}}}else{const s=n+i;return{selected:r,total:s}}}else if(e(h).startsWith("feature-")){const o=e(h).replace("feature-",""),l=w(e(f)).find(u=>u.source==="feature"&&u.sourceName===o);if(!l||!l.chooseable)return null;const n=l.chooseCantripCount??0,i=l.chooseSpellCount??0,s=n+i;return{selected:r,total:s}}else{if(e(h)==="cantrips")return{selected:e(ie),total:e(m).cantrips};if(e(h)==="level1")return e(m).isSharedLimits?{selected:e(k),total:e(m).sharedLeveled,shared:!0}:{selected:e(V),total:e(m).level1};if(e(h)==="level2")return e(m).isSharedLimits?{selected:e(k),total:e(m).sharedLeveled,shared:!0}:{selected:e(X),total:e(m).level2}}return null})())}),ws(),Ps();var Re=it(),ts=N(Re);Ms(ts,{tabName:"spells"});var Ns=L(ts,2);{var Ls=t=>{var a=Os();C(t,a)},xs=t=>{var a=nt(),r=te(a);Ge(r,5,()=>e(Z),He,(l,n)=>{var i=Bs();let s;var u=N(i,!0);g(i),O(b=>{s=Je(i,1,"tab-btn svelte-h8m3je",null,s,b),R(u,(e(n),p(()=>e(n).name)))},[()=>({active:e(h)===e(n).id,completed:bs(e(f),e(n).id)})]),Ne("click",i,()=>ds(e(n).id)),C(l,i)}),g(r);var o=L(r,2);{var v=l=>{var n=at();const i=je(()=>(e(Z),e(h),p(()=>e(Z).find(q=>q.id===e(h))))),s=je(()=>(e(h),e(M),p(()=>e(h).startsWith("subclass-")&&e(M).some(q=>q.spellSection)))),u=je(()=>(qe(e(s)),e(M),p(()=>e(s)?[{id:"cantrips",name:"Cantrips",spells:e(M).filter(q=>q.spellSection==="cantrips")},{id:"level1",name:"1st Level Spells",spells:e(M).filter(q=>q.spellSection==="level1")},{id:"level2",name:"2nd Level Spells",spells:e(M).filter(q=>q.spellSection==="level2")}].filter(q=>q.spells.length>0):[{id:"all",name:"",spells:e(M)}])));var b=N(n),S=N(b),K=L(S);{var As=q=>{var y=Ks(),ce=N(y);{var ue=J=>{var P=ze();O(()=>R(P,`(Cantrips: ${e(d),p(()=>e(d).cantrips.selected)??""}/${e(d),p(()=>e(d).cantrips.total)??""}, Spells: ${e(d),p(()=>e(d).spells.selected)??""}/${e(d),p(()=>e(d).spells.total)??""})`)),C(J,P)},ke=J=>{var P=ze();O(()=>R(P,`(${e(d),p(()=>e(d).selected)??""}/${e(d),p(()=>e(d).total)??""}
								${e(d),p(()=>e(d).shared?"total leveled spells":"")??""} selected)`)),C(J,P)};T(ce,J=>{e(d),p(()=>e(d).cantrips&&e(d).spells)?J(ue):J(ke,!1)})}g(y),C(q,y)};T(K,q=>{e(d),p(()=>e(d)&&e(d).total>0)&&q(As)})}g(b);var ls=L(b,2);{var qs=q=>{var y=zs(),ce=N(y,!0);g(y),O(ue=>R(ce,ue),[()=>(e(h),p(()=>Cs(e(h))))]),C(q,y)};T(ls,q=>{e(s)||q(qs)})}var js=L(ls,2);Ge(js,1,()=>e(u),He,(q,y)=>{var ce=rt(),ue=te(ce);{var ke=P=>{var c=Qs(),I=te(c),fe=N(I,!0);g(I);var Ae=L(I,2);{var oe=Q=>{var pe=Gs();C(Q,pe)},he=Q=>{var pe=ge(),me=te(pe);{var Me=ee=>{var re=Hs();C(ee,re)},Pe=ee=>{var re=ge(),Ue=te(re);{var Ye=ve=>{var Oe=Js();C(ve,Oe)};T(Ue,ve=>{e(y),p(()=>e(y).id==="level2")&&ve(Ye)},!0)}C(ee,re)};T(me,ee=>{e(y),p(()=>e(y).id==="level1")?ee(Me):ee(Pe,!1)},!0)}C(Q,pe)};T(Ae,Q=>{e(y),p(()=>e(y).id==="cantrips")?Q(oe):Q(he,!1)})}O(()=>R(fe,(e(y),p(()=>e(y).name)))),C(P,c)};T(ue,P=>{qe(e(s)),e(y),p(()=>e(s)&&e(y).name)&&P(ke)})}var J=L(ue,2);Ge(J,5,()=>(e(y),p(()=>e(y).spells)),He,(P,c)=>{var I=ot();const fe=je(()=>(e(De),e(c),p(()=>e(De).has(e(c).name))));let Ae;var oe=N(I),he=N(oe),Q=N(he);{var pe=A=>{var E=Vs();C(A,E)};T(Q,A=>{e(c),p(()=>!e(c).chooseable)&&A(pe)})}var me=L(Q,2),Me=N(me,!0);g(me);var Pe=L(me,2);{var ee=A=>{var E=Xs(),z=N(E),ae=L(z);{var U=D=>{var G=ze("(auto)");C(D,G)};T(ae,D=>{e(c),p(()=>!e(c).chooseable)&&D(U)})}g(E),O(()=>{Je(E,1,`spell-tag ${e(c),p(()=>e(c).source)??""}`,"svelte-h8m3je"),R(z,`${e(c),p(()=>e(c).sourceName)??""} `)}),C(A,E)};T(Pe,A=>{e(c),p(()=>e(c).source!=="class")&&A(ee)})}g(he);var re=L(he,2);{var Ue=A=>{var E=ge(),z=te(E);{var ae=D=>{var G=Zs(),ne=N(G,!0);g(G),O(de=>R(ne,de),[()=>(e(c),e(f),p(()=>gs(e(c).name,e(f))))]),C(D,G)},U=D=>{var G=ge(),ne=te(G);{var de=se=>{var Y=Is();Ne("click",Y,ns(()=>Ie(e(c).name,e(c).chooseable,e(c)))),C(se,Y)},be=se=>{var Y=et(),Be=N(Y,!0);g(Y),O((Se,Ke)=>{Y.disabled=Se,R(Be,Ke)},[()=>(e(h),e(c),p(()=>!ss(e(h),e(c)))),()=>(e(c),e(f),p(()=>hs(e(c).level,e(f))))]),Ne("click",Y,ns(()=>Ie(e(c).name,e(c).chooseable,e(c)))),C(se,Y)};T(ne,se=>{e(_),e(c),p(()=>e(_).has(e(c).name))?se(de):se(be,!1)},!0)}C(D,G)};T(z,D=>{e(fe)?D(ae):D(U,!1)})}C(A,E)},Ye=A=>{var E=ge(),z=te(E);{var ae=U=>{var D=st();C(U,D)};T(z,U=>{e(fe)&&U(ae)},!0)}C(A,E)};T(re,A=>{e(c),p(()=>e(c).chooseable)?A(Ue):A(Ye,!1)})}var ve=L(re,2),Oe=N(ve,!0);g(ve),g(oe);var Fs=L(oe,2);{var ys=A=>{var E=lt(),z=N(E),ae=N(z,!0);g(z);var U=L(z,2),D=N(U),G=L(N(D));g(D);var ne=L(D,2),de=L(N(ne));g(ne);var be=L(ne,2),se=L(N(be));g(be);var Y=L(be,2),Be=L(N(Y));g(Y),g(U);var Se=L(U,2),Ke=N(Se);os(Ke,()=>(e(c),p(()=>Ze(e(c).description)))),g(Se);var Ws=L(Se,2);{var $s=Ce=>{var _e=tt(),Es=L(N(_e),2);os(Es,()=>(e(c),p(()=>Ze(e(c).higherLevel)))),g(_e),C(Ce,_e)};T(Ws,Ce=>{e(c),p(()=>e(c).higherLevel)&&Ce($s)})}g(E),O((Ce,_e)=>{R(ae,Ce),R(G,` ${e(c),p(()=>e(c).castingTime)??""}`),R(de,` ${e(c),p(()=>e(c).range)??""}`),R(se,` ${_e??""}`),R(Be,` ${e(c),p(()=>e(c).duration)??""}`)},[()=>(e(c),p(()=>cs(e(c)))),()=>(e(c),p(()=>us(e(c).components)))]),C(A,E)};T(Fs,A=>{e(B),e(c),p(()=>e(B).has(e(c).name))&&A(ys)})}g(I),O((A,E)=>{Ae=Je(I,1,"spell-card svelte-h8m3je",null,Ae,A),R(Me,(e(c),p(()=>e(c).name))),R(Oe,E)},[()=>({special:e(c).source!=="class","auto-granted":!e(c).chooseable,unavailable:e(fe),expanded:e(B).has(e(c).name)}),()=>(e(B),e(c),p(()=>e(B).has(e(c).name)?"âˆ’":"+"))]),Ne("click",oe,()=>es(e(c).name)),Ne("keydown",oe,A=>A.key==="Enter"&&es(e(c).name)),C(P,I)}),g(J),C(q,ce)}),g(n),O(()=>R(S,`${qe(e(i)),p(()=>e(i)?.name||"Spells")??""} `)),C(l,n)};T(o,l=>{e(h),e(M),p(()=>e(h)&&e(M).length>0)&&l(v)})}C(t,a)};T(Ns,t=>{qe(rs),e(f),p(()=>!rs(e(f)))?t(Ls):t(xs,!1)})}g(Re),C(Fe,Re),Ds(),is()}export{gt as component};
