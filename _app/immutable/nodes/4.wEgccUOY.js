import"../chunks/DsnmJJEf.js";import"../chunks/CLB9eUYX.js";import{h as We,W as Ze,ar as R,as as qe,X as A,ay as ue,Y as C,Z as Ue,d as e,_ as c,j as _,z as S,at as O,$ as n,a0 as r,v as h,au as W,aN as et,ax as Ae,aO as fe,aP as tt,aw as it,aQ as st}from"../chunks/rn6nHgdH.js";import{e as $,g as at,a as w}from"../chunks/ZJQv4x7Q.js";import{i as E}from"../chunks/Co363syM.js";import{a as rt,e as q,i as U}from"../chunks/CAQU5EIs.js";import{s as ot}from"../chunks/BXwS9YYZ.js";import{b as nt}from"../chunks/COMRBWPk.js";import{i as lt}from"../chunks/hD6VUnFp.js";import{s as ct,a as vt}from"../chunks/Cb9z2JfB.js";import{c as re}from"../chunks/CIqA3WZi.js";import{a as $e,g as Le}from"../chunks/u1FZ14JW.js";function Pe(X,F,me,oe){var ee=X.__style;if(We||ee!==F){var d=rt(F);(!We||d!==X.getAttribute("style"))&&(d==null?X.removeAttribute("style"):X.style.cssText=d),X.__style=F}return oe}var dt=A('<span class="ability-tag capitalize svelte-pr6v0o"> </span>'),pt=A('<div class="card class-recommendation-card mb-6 svelte-pr6v0o"><div class="class-rec-header svelte-pr6v0o"><h2 class="svelte-pr6v0o"> </h2></div> <div class="class-rec-content svelte-pr6v0o"><div class="priority-group svelte-pr6v0o"><span class="priority-label svelte-pr6v0o">Most Important:</span> <div class="ability-list svelte-pr6v0o"></div></div></div></div>'),ut=A("<option> </option>"),ft=A('<div class="grid grid-cols-5 items-center gap-4 border-b py-3 transition-colors hover:bg-gray-50 svelte-pr6v0o"><button class="ability-name-btn cursor-pointer text-center font-medium text-gray-800 capitalize transition-colors hover:text-indigo-600 hover:underline focus:text-indigo-600 focus:outline-none svelte-pr6v0o"> </button> <select class="w-full rounded border px-2 py-1 focus:ring-2 focus:ring-indigo-200 focus:outline-none svelte-pr6v0o"><option>--</option><!></select> <div class="text-center font-semibold text-gray-700 svelte-pr6v0o"><!></div> <div class="text-center font-semibold text-gray-800 svelte-pr6v0o"> </div> <div class="text-center font-mono font-bold text-indigo-600 svelte-pr6v0o"> </div></div>'),mt=A('<li class="svelte-pr6v0o"> </li>'),ht=A('<div class="ability-info-popup svelte-pr6v0o" role="dialog" tabindex="-1"><div class="popup-content svelte-pr6v0o"><div class="popup-header svelte-pr6v0o"><h3 class="popup-title svelte-pr6v0o"> </h3> <button class="popup-close svelte-pr6v0o">×</button></div> <div class="popup-body svelte-pr6v0o"><p class="popup-description svelte-pr6v0o"> </p> <div class="popup-section svelte-pr6v0o"><h4 class="popup-section-title svelte-pr6v0o"> </h4> <ul class="popup-affects-list svelte-pr6v0o"></ul></div></div></div></div>'),gt=A('<div class="popup-overlay svelte-pr6v0o"></div>'),_t=A('<div class="modifier-table-row svelte-pr6v0o"><span class="modifier-table-score svelte-pr6v0o"> </span> <span class="modifier-table-mod svelte-pr6v0o"> </span></div>'),yt=A(`<div class="ability-info-popup svelte-pr6v0o" role="dialog" tabindex="-1"><div class="popup-content svelte-pr6v0o"><div class="popup-header svelte-pr6v0o"><h3 class="popup-title svelte-pr6v0o">Ability Score Modifiers</h3> <button class="popup-close svelte-pr6v0o">×</button></div> <div class="popup-body svelte-pr6v0o"><p class="popup-description svelte-pr6v0o">Modifiers represent the bonus or penalty you add to dice rolls based on your ability
					scores.</p> <div class="popup-section svelte-pr6v0o"><div class="modifier-table svelte-pr6v0o"><div class="modifier-table-header svelte-pr6v0o"><span class="modifier-table-label svelte-pr6v0o">Score</span> <span class="modifier-table-label svelte-pr6v0o">Modifier</span></div> <!></div></div></div></div></div>`),bt=A('<div class="popup-overlay svelte-pr6v0o"></div>'),xt=A('<div class="spell-limit-warning-banner svelte-pr6v0o"><div class="warning-content svelte-pr6v0o"><div class="warning-icon svelte-pr6v0o">⚠️</div> <div class="warning-text svelte-pr6v0o"><h3 class="svelte-pr6v0o">Spell Limit Exceeded</h3> <p class="svelte-pr6v0o"> <strong> </strong> but can only prepare <strong> </strong>. Please visit the <a href="/spells" class="svelte-pr6v0o">Spells page</a> to remove <strong> </strong>.</p></div> <button class="warning-dismiss svelte-pr6v0o" title="Dismiss warning">×</button></div></div>'),wt=A('<div class="container svelte-pr6v0o"><!> <div class="card ability-card mt-4 svelte-pr6v0o"><div class="grid grid-cols-5 gap-4 border-b pb-2 font-bold text-gray-700 svelte-pr6v0o"><div class="text-center svelte-pr6v0o">Ability</div> <div class="text-center svelte-pr6v0o">Score</div> <div class="text-center svelte-pr6v0o">Species Bonus</div> <div class="text-center svelte-pr6v0o">Total</div> <div class="text-center svelte-pr6v0o"><button class="modifier-header-btn cursor-pointer transition-colors hover:text-indigo-600 hover:underline focus:text-indigo-600 focus:outline-none svelte-pr6v0o" title="Click for more information about modifiers">Modifier ℹ️</button></div></div> <!></div></div> <!> <!> <!> <!> <!>',1);function Dt(X,F){Ze(F,!1);const[me,oe]=ct(),ee=()=>vt(re,"$character_store",me),d=S(),K=S(),ne=S(),te=S(),ie=S(),Ie=[15,14,13,12,10,8],se=["strength","dexterity","constitution","intelligence","wisdom","charisma"],Ne={Barbarian:{abilities:["strength","constitution","dexterity"]},Bard:{abilities:["charisma","dexterity","constitution"]},Cleric:{abilities:["wisdom","constitution","strength"]},Druid:{abilities:["wisdom","constitution","dexterity"]},Fighter:{abilities:["strength","dexterity","constitution"]},Monk:{abilities:["dexterity","wisdom","constitution"]},Paladin:{abilities:["strength","charisma","constitution"]},Ranger:{abilities:["dexterity","wisdom","constitution"]},Rogue:{abilities:["dexterity","constitution","wisdom"]},Sorcerer:{abilities:["charisma","constitution","dexterity"]},Warlock:{abilities:["charisma","constitution","dexterity"]},Wizard:{abilities:["intelligence","constitution","dexterity"]}},V={strength:{title:"Strength",description:"Measures your character's physical power and raw muscle. Strength determines how much you can carry and influences melee weapon attacks.",affects:["Melee weapon attack rolls","Melee weapon damage rolls","Carrying capacity","Athletics skill checks","Jumping distance"]},dexterity:{title:"Dexterity",description:"Measures agility, reflexes, and balance. Dexterity affects your Armor Class, initiative, and ranged attacks.",affects:["Armor Class (when not wearing heavy armor)","Initiative rolls","Ranged weapon attacks","Acrobatics and Stealth skills","Dexterity saving throws"]},constitution:{title:"Constitution",description:"Measures health, stamina, and vital force. Constitution affects your hit points and resistance to disease and poison.",affects:["Hit points per level","Constitution saving throws","Concentration checks","Resistance to disease and poison","Death saving throws"]},intelligence:{title:"Intelligence",description:"Measures reasoning ability, memory, and analytical thinking. Intelligence determines your ability to learn and recall information.",affects:["Number of languages known","Investigation and History skills","Wizard spell preparation","Intelligence saving throws","General knowledge and reasoning"]},wisdom:{title:"Wisdom",description:"Measures awareness, intuition, and attunement to surroundings. Wisdom affects perception and insight into others.",affects:["Perception and Insight skills","Wisdom saving throws","Cleric and Druid spell preparation","Passive Perception","Animal Handling and Survival"]},charisma:{title:"Charisma",description:"Measures force of personality, leadership ability, and confidence. Charisma affects social interactions and certain spellcasting.",affects:["Social skill checks (Persuasion, Deception, Intimidation)","Charisma saving throws","Bard, Sorcerer, Warlock spells","Leadership and performance","Number of followers/hirelings"]}};let G=S(!1),M=S(null),H=S({x:0,y:0}),ae=S(!1),z=S({x:0,y:0}),j=S(!1),L=S({currentCount:0,newLimit:0,excessCount:0});function Re(i,t){_(M,i);const a=350,o=20,u=window.innerWidth,p=window.innerHeight;let v=t.clientX+10,m=t.clientY-10;v+a>u-o&&(v=t.clientX-a-10),m<o&&(m=o),m>p-200&&(m=p-200),O(H,e(H).x=Math.max(o,v)),O(H,e(H).y=Math.max(o,m)),_(G,!0),document.addEventListener("keydown",he)}function he(i){i.key==="Escape"&&J()}function J(){_(G,!1),_(M,null),document.removeEventListener("keydown",he)}function De(i){const o=window.innerWidth,u=window.innerHeight;let p=i.clientX+10,v=i.clientY-10;p+300>o-20&&(p=i.clientX-300-10),v<20&&(v=20),v>u-300&&(v=u-300),O(z,e(z).x=Math.max(20,p)),O(z,e(z).y=Math.max(20,v)),_(ae,!0),document.addEventListener("keydown",ge)}function ge(i){i.key==="Escape"&&Q()}function Q(){_(ae,!1),document.removeEventListener("keydown",ge)}function Ee(i,t){return i==="Rogue"&&t==="Arcane Trickster"?{abilities:["dexterity","constitution","intelligence"]}:Ne[i]||null}let l=S({strength:null,dexterity:null,constitution:null,intelligence:null,wisdom:null,charisma:null}),Z=S(!1),f=S({strength:0,dexterity:0,constitution:0,intelligence:0,wisdom:0,charisma:0});function le(i){return Math.floor((i-10)/2)}function He(i){const t=le(i);return t>=0?`+${t}`:`${t}`}function ze(){if(!e(d).spells||e(d).spells.length===0)return;const i=(e(l).charisma||10)+(e(f).charisma||0),t=le(i),a=Math.max(1,t+1),o={...e(d),charisma:i},u=$e(o),p=u.find(s=>s.source==="class"&&s.sourceName==="Paladin");if(!p||!p.chooseable)return;const v=u.filter(s=>s.source==="subclass"&&s.sourceName?.includes("Oath")).flatMap(s=>s.spells||[]),m=Le(0),y=new Set(m.map(s=>s.name)),b=e(d).spells.filter(s=>{const x=typeof s=="string"?s:s.name;return!v.includes(x)&&!y.has(x)});if(b.length>a){const s=b.length-a;_(L,{currentCount:b.length,newLimit:a,excessCount:s}),_(j,!0)}else _(j,!1)}function Be(){if(!e(d).spells||e(d).spells.length===0)return;const i=(e(l).wisdom||10)+(e(f).wisdom||0),t=le(i),a=Math.max(1,t+3),o={...e(d),wisdom:i},u=$e(o),p=u.find(s=>s.source==="class"&&s.sourceName==="Cleric");if(!p||!p.chooseable)return;const v=u.filter(s=>s.source==="subclass"&&s.sourceName?.includes("Domain")).flatMap(s=>s.spells||[]),m=Le(0),y=new Set(m.map(s=>s.name)),b=e(d).spells.filter(s=>{const x=typeof s=="string"?s:s.name;return!v.includes(x)&&!y.has(x)});if(b.length>a){const s=b.length-a;_(L,{currentCount:b.length,newLimit:a,excessCount:s}),_(j,!0)}else _(j,!1)}function Xe(){_(j,!1)}R(()=>ee(),()=>{_(d,ee())}),R(()=>e(d),()=>{_(K,e(d).class)}),R(()=>e(d),()=>{_(ne,e(d).subclass)}),R(()=>(e(K),e(ne)),()=>{_(te,e(K)?Ee(e(K),e(ne)):null)}),R(()=>e(f),()=>{const t=at(re)._provenance??{};_(f,{strength:0,dexterity:0,constitution:0,intelligence:0,wisdom:0,charisma:0});for(const a in t){const o=t[a]?._mods;if(o)for(const u of se)o[u]!=null&&O(f,e(f)[u]+=o[u])}}),R(()=>(e(Z),e(d),e(l),e(f)),()=>{if(!e(Z)){let i=!1;for(const t of se){const a=e(d)[t];if(a&&e(l)[t]===null){const o=a-(e(f)[t]||0);o>0&&(O(l,e(l)[t]=o),i=!0)}}(i||Object.values(e(f)).some(t=>t!==0))&&_(Z,!0)}}),R(()=>e(l),()=>{_(ie,Object.values(e(l)).filter(i=>i!==null&&i>0))}),R(()=>(e(l),e(f),e(d),e(Z),re),()=>{const i={};let t=!1;for(const a of se)if(e(l)[a]!==null&&e(l)[a]>0){const o=e(l)[a]+(e(f)[a]||0);e(d)[a]!==o&&(i[a]=o,t=!0)}else e(Z)&&e(d)[a]!==void 0&&(i[a]=void 0,t=!0);t&&re.update(a=>({...a,...i}))}),R(()=>(e(d),e(l)),()=>{e(d).class==="Paladin"&&e(l).charisma!==null&&e(l).charisma>0&&ze()}),R(()=>(e(d),e(l)),()=>{e(d).class==="Cleric"&&e(l).wisdom!==null&&e(l).wisdom>0&&Be()}),qe(),lt();var _e=wt(),ce=ue(_e),ye=n(ce);{var Ye=i=>{var t=pt(),a=n(t),o=n(a),u=n(o);r(o),r(a);var p=c(a,2),v=n(p),m=c(n(v),2);q(m,5,()=>(e(te),h(()=>e(te).abilities)),U,(y,b)=>{var s=dt(),x=n(s,!0);r(s),W(()=>w(x,e(b))),C(y,s)}),r(m),r(v),r(p),r(t),W(()=>w(u,`${e(K)??""} Ability Recommendations`)),C(i,t)};E(ye,i=>{e(te)&&i(Ye)})}var be=c(ye,2),ve=n(be),xe=c(n(ve),8),Oe=n(xe);r(xe),r(ve);var je=c(ve,2);q(je,1,()=>se,U,(i,t)=>{var a=ft(),o=n(a),u=n(o);r(o);var p=c(o,2);W(()=>{e(l),et(()=>{e(t),e(ie)})});var v=n(p);v.value=(v.__value=null)??"";var m=c(v);q(m,1,()=>Ie,U,(g,k)=>{var T=Ae(),de=ue(T);{var pe=I=>{var N=ut(),Qe=n(N,!0);r(N);var Me={};W(()=>{w(Qe,e(k)),Me!==(Me=e(k))&&(N.value=(N.__value=e(k))??"")}),C(I,N)};E(de,I=>{e(ie),e(k),e(l),e(t),h(()=>!e(ie).includes(e(k))||e(l)[e(t)]===e(k))&&I(pe)})}C(g,T)}),r(p);var y=c(p,2),b=n(y);{var s=g=>{var k=fe();W(()=>w(k,`+${e(f),e(t),h(()=>e(f)[e(t)])??""}`)),C(g,k)},x=g=>{var k=Ae(),T=ue(k);{var de=I=>{var N=fe();W(()=>w(N,(e(f),e(t),h(()=>e(f)[e(t)])))),C(I,N)},pe=I=>{var N=fe("0");C(I,N)};E(T,I=>{e(f),e(t),h(()=>e(f)[e(t)]<0)?I(de):I(pe,!1)},!0)}C(g,k)};E(b,g=>{e(f),e(t),h(()=>e(f)[e(t)]>0)?g(s):g(x,!1)})}r(y);var D=c(y,2),B=n(D,!0);r(D);var P=c(D,2),Y=n(P,!0);r(P),r(a),W(g=>{ot(o,"title",`Click for more information about ${e(t)??""}`),w(u,`${e(t)??""} ℹ️`),w(B,(e(l),e(t),e(f),h(()=>e(l)[e(t)]!==null&&e(l)[e(t)]>0?e(l)[e(t)]+(e(f)[e(t)]??0):""))),w(Y,g)},[()=>(e(l),e(t),e(f),h(()=>e(l)[e(t)]!==null&&e(l)[e(t)]>0?He(e(l)[e(t)]+(e(f)[e(t)]??0)):""))]),$("click",o,g=>Re(e(t),g)),nt(p,()=>e(l)[e(t)],g=>O(l,e(l)[e(t)]=g)),C(i,a)}),r(be),r(ce);var we=c(ce,2);{var Te=i=>{var t=ht(),a=n(t),o=n(a),u=n(o),p=n(u,!0);r(u);var v=c(u,2);r(o);var m=c(o,2),y=n(m),b=n(y,!0);r(y);var s=c(y,2),x=n(s),D=n(x);r(x);var B=c(x,2);q(B,5,()=>(e(M),h(()=>V[e(M)].affects)),U,(P,Y)=>{var g=mt(),k=n(g,!0);r(g),W(()=>w(k,e(Y))),C(P,g)}),r(B),r(s),r(m),r(a),r(t),W(()=>{Pe(t,`left: ${e(H),h(()=>e(H).x)??""}px; top: ${e(H),h(()=>e(H).y)??""}px;`),w(p,(e(M),h(()=>V[e(M)].title))),w(b,(e(M),h(()=>V[e(M)].description))),w(D,`What ${e(M),h(()=>V[e(M)].title)??""} affects:`)}),$("click",v,J),$("click",t,J),$("keydown",t,P=>P.key==="Escape"&&J()),C(i,t)};E(we,i=>{e(G),e(M),h(()=>e(G)&&e(M)&&V[e(M)])&&i(Te)})}var ke=c(we,2);{var Fe=i=>{var t=gt();$("click",t,J),C(i,t)};E(ke,i=>{e(G)&&i(Fe)})}var Ce=c(ke,2);{var Ke=i=>{var t=yt(),a=n(t),o=n(a),u=c(n(o),2);r(o);var p=c(o,2),v=c(n(p),2),m=n(v),y=c(n(m),2);q(y,0,()=>[["8-9",-1],["10-11",0],["12-13",1],["14-15",2],["16-17",3],["18-19",4]],U,(b,s)=>{var x=tt(()=>st(s,2));let D=()=>e(x)[0],B=()=>e(x)[1];var P=_t(),Y=n(P),g=n(Y,!0);r(Y);var k=c(Y,2),T=n(k,!0);r(k),r(P),W(()=>{w(g,D()),w(T,B()>=0?"+"+B():B())}),C(b,P)}),r(m),r(v),r(p),r(a),r(t),W(()=>Pe(t,`left: ${e(z),h(()=>e(z).x)??""}px; top: ${e(z),h(()=>e(z).y)??""}px;`)),$("click",u,Q),$("click",t,Q),$("keydown",t,b=>b.key==="Escape"&&Q()),C(i,t)};E(Ce,i=>{e(ae)&&i(Ke)})}var Se=c(Ce,2);{var Ve=i=>{var t=bt();$("click",t,Q),C(i,t)};E(Se,i=>{e(ae)&&i(Ve)})}var Ge=c(Se,2);{var Je=i=>{var t=xt(),a=n(t),o=c(n(a),2),u=c(n(o),2),p=n(u),v=c(p),m=n(v);r(v);var y=c(v,2),b=n(y,!0);r(y);var s=c(y,4),x=n(s);r(s),it(),r(u),r(o);var D=c(o,2);r(a),r(t),W(()=>{w(p,`Your ${e(d),h(()=>e(d).class==="Paladin"?"Charisma":"Wisdom")??""} modifier change has reduced
					your prepared spell limit. You currently have `),w(m,`${e(L),h(()=>e(L).currentCount)??""} prepared spells`),w(b,(e(L),h(()=>e(L).newLimit))),w(x,`${e(L),h(()=>e(L).excessCount)??""} spell${e(L),h(()=>e(L).excessCount>1?"s":"")??""}`)}),$("click",D,Xe),C(i,t)};E(Ge,i=>{e(j)&&i(Je)})}$("click",Oe,i=>De(i)),C(X,_e),Ue(),oe()}export{Dt as component};
