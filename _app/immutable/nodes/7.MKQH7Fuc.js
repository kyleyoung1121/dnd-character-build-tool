import"../chunks/DsnmJJEf.js";import"../chunks/CQMj6I71.js";import{y as it,ah as Ne,ai as ot,z as l,A as n,B as nt,d as e,j as pe,aj as _e,ak as Ee,E as r,v as a,C as g,F as s,al as b,an as ke,ao as de}from"../chunks/D8epjS11.js";import{g as vt,s as x,e as ce}from"../chunks/BiH1rH3r.js";import{i as L,s as lt,a as pt}from"../chunks/DNOeg3kL.js";import{e as R,i as A}from"../chunks/Cf40ah7q.js";import{s as me}from"../chunks/Dmswp-gS.js";import{s as Ge}from"../chunks/BUqHBage.js";import{i as Re,s as Ae}from"../chunks/CJrJrPvA.js";import{i as ct}from"../chunks/nRLFwT7N.js";import{c as Pe}from"../chunks/DANXc4Na.js";import{a as fe}from"../chunks/CFTOOR2V.js";import{b as We}from"../chunks/BPjcew-M.js";import{g as ut,w as _t,s as dt,e as mt,r as ft,p as gt,m as qt,d as bt,c as ht,a as xt,b as St,f as Et}from"../chunks/CZTUd0m-.js";import{b as Te}from"../chunks/C7JnBEaE.js";var kt=l('<div class="no-selection svelte-4rxppr"><h2 class="svelte-4rxppr">No Class Selected</h2> <p class="svelte-4rxppr">Please select a class first to see starting equipment options.</p> <a class="nav-link svelte-4rxppr">Go to Class Selection</a></div>'),Ct=l('<div class="no-equipment svelte-4rxppr"><h2 class="svelte-4rxppr">Equipment Not Available</h2> <p class="svelte-4rxppr"> </p></div>'),yt=l('<div class="equipment-item class-equipment svelte-4rxppr"><span class="item-name svelte-4rxppr"> </span></div>'),Ot=l('<div class="equipment-group svelte-4rxppr"><h3 class="svelte-4rxppr">Standard Equipment</h3> <div class="equipment-list svelte-4rxppr"></div></div>'),wt=l("<button> </button>"),Bt=l("<option> </option>"),jt=l('<div class="weapon-selection"><select class="subchoice-select svelte-4rxppr"><option> </option><!></select></div>'),Nt=l("<option> </option>"),Rt=l('<div class="simple-selection"><select class="subchoice-select svelte-4rxppr"><option> </option><!></select></div>'),At=l('<div class="subchoice-group svelte-4rxppr"><h4 class="svelte-4rxppr"> </h4> <p class="subchoice-description svelte-4rxppr"> </p> <!></div>'),Ft=l('<div class="subchoices-container svelte-4rxppr"></div>'),zt=l('<div class="enhanced-choice svelte-4rxppr"><div class="main-options svelte-4rxppr"></div> <!></div>'),Dt=l("<option> </option>"),Lt=l('<div class="dropdown-container svelte-4rxppr"><select class="equipment-dropdown svelte-4rxppr"><option disabled>Choose an option...</option><!></select></div>'),Mt=l('<span class="option-item svelte-4rxppr"> </span>'),Gt=l('<button class="choice-option svelte-4rxppr"><div class="option-items svelte-4rxppr"></div></button>'),Pt=l('<div class="choice-options svelte-4rxppr"></div>'),Wt=l('<div class="equipment-group svelte-4rxppr"><h3 class="svelte-4rxppr"> </h3> <p class="choice-description svelte-4rxppr"> </p> <!></div>'),Tt=l('<div class="equipment-section svelte-4rxppr"><div class="section-header svelte-4rxppr"><img class="class-icon svelte-4rxppr"/> <h2 class="svelte-4rxppr"> </h2></div> <!> <!></div>'),$t=l('<div class="equipment-item background svelte-4rxppr"><span class="item-name svelte-4rxppr"> </span></div>'),Ht=l('<div class="equipment-group svelte-4rxppr"><h3 class="svelte-4rxppr">Fixed Equipment</h3> <div class="equipment-list svelte-4rxppr"></div></div>'),Jt=l("<option> </option>"),Kt=l('<div class="dropdown-container svelte-4rxppr"><select class="equipment-dropdown svelte-4rxppr"><option disabled>Choose an option...</option><!></select></div>'),Qt=l('<span class="option-item svelte-4rxppr"> </span>'),Ut=l('<button><div class="option-items svelte-4rxppr"></div></button>'),Vt=l('<div class="choice-options svelte-4rxppr"></div>'),Xt=l('<div class="equipment-group svelte-4rxppr"><h3 class="svelte-4rxppr"> </h3> <p class="choice-description svelte-4rxppr"> </p> <!></div>'),Yt=l("<!> <!>",1),Zt=l('<div class="equipment-item background svelte-4rxppr"><span class="item-name svelte-4rxppr"> </span></div>'),It=l('<div class="equipment-group svelte-4rxppr"><h3 class="svelte-4rxppr">Background Equipment</h3> <div class="equipment-list svelte-4rxppr"></div></div>'),es=l('<div class="equipment-section svelte-4rxppr"><div class="section-header svelte-4rxppr"><img class="background-icon svelte-4rxppr"/> <h2 class="svelte-4rxppr"> </h2></div> <!></div>'),ts=l('<div class="equipment-section svelte-4rxppr"><h2>Background Equipment</h2> <p>Background equipment data is loading...</p></div>'),ss=l('<div class="no-selection svelte-4rxppr"><h2 class="svelte-4rxppr">No Background Selected</h2> <p class="svelte-4rxppr">Select a background to see additional starting equipment.</p> <a class="nav-link svelte-4rxppr">Go to Background Selection</a></div>'),as=l('<div class="main-content svelte-4rxppr"><!> <!></div>');function bs($e,He){it(He,!1);const[Je,Ke]=lt(),Q=()=>pt(Pe,"$character_store",Je),Qe={Fighter:Et,Barbarian:St,Bard:xt,Cleric:ht,Druid:bt,Monk:qt,Paladin:gt,Ranger:ft,Rogue:mt,Sorcerer:dt,Warlock:_t,Wizard:ut};let d=_e(null),S=_e(null),f=_e({}),I=_e({}),ie=_e({}),oe=_e({});function Ue(){if(!e(d)?.startingEquipment?.choices)return;const t=vt(Pe);if(!t._provenance)return;const o={};e(d).startingEquipment.choices.forEach((c,m)=>{const q=`class_equipment_${m}`,u=t._provenance[q];if(u&&ye(c)){const p=u._set||u;if(p.selectedOption!==void 0)o[m]={selectedOption:p.selectedOption,subChoiceSelections:p.subChoiceSelections||{}};else if(p.inventory){const C=p.inventory;for(let y=0;y<c.options.length;y++){const M=c.options[y];if(Ve(M,C)){o[m]={selectedOption:y,subChoiceSelections:Xe(M,C)};break}}}}}),Object.keys(o).length>0&&pe(f,{...e(f),...o})}function Ve(t,o){const c=[];if(t.items&&c.push(...t.items),t.subChoices)for(const m of t.subChoices)c.push(...m.options);return o.every(m=>c.includes(m))}function Xe(t,o){const c={};if(!t.subChoices)return c;for(const m of t.subChoices){const q=o.filter(u=>m.options.includes(u));q.length>0&&(c[m.name]=q)}return c}function ye(t){return"options"in t&&t.options.length>0&&typeof t.options[0]=="object"&&"label"in t.options[0]}function Ye(t){return"options"in t&&t.options.length>0&&Array.isArray(t.options[0])}function Fe(t,o){if(!e(d))return;const m=e(d).startingEquipment.choices[t].options[o],q=`class_equipment_${t}`;fe(q,{inventory:m})}function Ze(t,o){if(!e(d))return;const m=e(d).startingEquipment.choices[t].options[o],q=`class_equipment_${t}`;fe(q,{inventory:[]});const u={...e(f)};u[t]={selectedOption:o,subChoiceSelections:{}},pe(f,u);const p={selectedOption:o,subChoiceSelections:{},inventory:[]};fe(q,p),m.items&&!m.subChoices&&(p.inventory=m.items,fe(q,p))}function ze(t,o,c){if(!e(d)||!e(f)[t])return;const m=e(d).startingEquipment.choices[t],q=e(f)[t].selectedOption;if(q===void 0)return;const u=m.options[q],p={...e(f)};p[t]={...e(f)[t],subChoiceSelections:{...e(f)[t].subChoiceSelections,[o]:c}},pe(f,p);const C=`class_equipment_${t}`,y={selectedOption:q,subChoiceSelections:p[t].subChoiceSelections,inventory:[]};if(u.subChoices?.every(F=>p[t].subChoiceSelections[F.name]?.length>0)??!0){let F=[];if(u.items&&F.push(...u.items),u.subChoices&&p[t].subChoiceSelections)for(const U of u.subChoices){const se=p[t].subChoiceSelections[U.name];se&&F.push(...se)}y.inventory=F}fe(C,y)}function De(t,o){if(!e(S)?.startingEquipment)return;Ee(I,e(I)[t]=o);const m=e(S).startingEquipment.choices[t].options[o],q=`background_equipment_${t}`;fe(q,{inventory:m})}Ne(()=>(Q(),e(d)),()=>{const t=Q().class;pe(d,t?Qe[t]:null),e(d)&&Ue()}),Ne(()=>(Q(),Te),()=>{const t=Q().background;pe(S,t&&Te.find(o=>o.name===t)||null)}),Ne(()=>(e(d),e(f)),()=>{e(d)?.startingEquipment?.choices&&(pe(ie,{}),pe(oe,{}),e(d).startingEquipment.choices.forEach((t,o)=>{if(ye(t)&&e(f)[o]?.selectedOption!==void 0){const c=t.options[e(f)[o].selectedOption];Ee(ie,e(ie)[o]=!!(c.subChoices&&c.subChoices.length>0)),Ee(oe,e(oe)[o]=c.subChoices||[])}else Ee(ie,e(ie)[o]=!1),Ee(oe,e(oe)[o]=[])}))}),ot(),ct();var Oe=as(),Le=r(Oe);{var Ie=t=>{var o=kt(),c=g(r(o),4);s(o),b(()=>me(c,"href",`${We??""}/class`)),n(t,o)},et=t=>{var o=ke(),c=de(o);{var m=u=>{var p=Ct(),C=g(r(p),2),y=r(C);s(C),s(p),b(()=>x(y,`Starting equipment data is not yet available for ${Q(),a(()=>Q().class)??""}. This will be
				added soon!`)),n(u,p)},q=u=>{var p=Tt(),C=r(p),y=r(C),M=g(y,2),F=r(M);s(M),s(C);var U=g(C,2);{var se=O=>{var v=Ot(),_=g(r(v),2);R(_,5,()=>(e(d),a(()=>e(d).startingEquipment.fixed)),A,($,H)=>{var J=yt(),G=r(J),ne=r(G,!0);s(G),s(J),b(()=>x(ne,e(H))),n($,J)}),s(_),s(v),n(O,v)};L(U,O=>{e(d),a(()=>e(d).startingEquipment.fixed.length>0)&&O(se)})}var ge=g(U,2);R(ge,1,()=>(e(d),a(()=>e(d).startingEquipment.choices)),A,(O,v,_)=>{var $=Wt(),H=r($),J=r(H,!0);s(H);var G=g(H,2),ne=r(G,!0);s(G);var we=g(G,2);{var Be=P=>{var z=zt(),w=r(z);R(w,5,()=>(e(v),a(()=>e(v).options)),A,(k,B,j)=>{var i=wt();let h;var E=r(i,!0);s(i),b(N=>{h=Ge(i,1,"choice-option svelte-4rxppr",null,h,N),x(E,(e(B),a(()=>e(B).label)))},[()=>({selected:e(f)[_]?.selectedOption===j})]),ce("click",i,()=>Ze(_,j)),n(k,i)}),s(w);var ee=g(w,2);{var V=k=>{var B=Ft();R(B,5,()=>(e(oe),a(()=>e(oe)[_])),A,(j,i)=>{var h=At(),E=r(h),N=r(E,!0);s(E);var te=g(E,2),qe=r(te,!0);s(te);var X=g(te,2);{var Y=D=>{var T=jt(),W=r(T),ve=r(W),he=r(ve);s(ve),ve.value=ve.__value="";var xe=g(ve);R(xe,1,()=>(e(i),a(()=>e(i).options)),A,(K,ae)=>{var le=Bt(),Ce=r(le,!0);s(le);var re={};b(()=>{x(Ce,e(ae)),re!==(re=e(ae))&&(le.value=(le.__value=e(ae))??"")}),n(K,le)}),s(W);var Z;Re(W),s(T),b(K=>{x(he,`Choose ${K??""}...`),Z!==(Z=(e(f),e(i),a(()=>e(f)[_]?.subChoiceSelections?.[e(i).name]?.[0]||"")))&&(W.value=(W.__value=(e(f),e(i),a(()=>e(f)[_]?.subChoiceSelections?.[e(i).name]?.[0]||"")))??"",Ae(W,(e(f),e(i),a(()=>e(f)[_]?.subChoiceSelections?.[e(i).name]?.[0]||""))))},[()=>(e(i),a(()=>e(i).name.toLowerCase()))]),ce("change",W,K=>{const ae=K.target;ae.value&&ze(_,e(i).name,[ae.value])}),n(D,T)},be=D=>{var T=ke(),W=de(T);{var ve=he=>{var xe=Rt(),Z=r(xe),K=r(Z),ae=r(K);s(K),K.value=K.__value="";var le=g(K);R(le,1,()=>(e(i),a(()=>e(i).options)),A,(re,ue)=>{var Se=Nt(),rt=r(Se,!0);s(Se);var Me={};b(()=>{x(rt,e(ue)),Me!==(Me=e(ue))&&(Se.value=(Se.__value=e(ue))??"")}),n(re,Se)}),s(Z);var Ce;Re(Z),s(xe),b(re=>{x(ae,`Choose ${re??""}...`),Ce!==(Ce=(e(f),e(i),a(()=>e(f)[_]?.subChoiceSelections?.[e(i).name]?.[0]||"")))&&(Z.value=(Z.__value=(e(f),e(i),a(()=>e(f)[_]?.subChoiceSelections?.[e(i).name]?.[0]||"")))??"",Ae(Z,(e(f),e(i),a(()=>e(f)[_]?.subChoiceSelections?.[e(i).name]?.[0]||""))))},[()=>(e(i),a(()=>e(i).name.toLowerCase()))]),ce("change",Z,re=>{const ue=re.target;ue.value&&ze(_,e(i).name,[ue.value])}),n(he,xe)};L(W,he=>{e(i),a(()=>e(i).type==="simple-list")&&he(ve)},!0)}n(D,T)};L(X,D=>{e(i),a(()=>e(i).type==="weapon-list")?D(Y):D(be,!1)})}s(h),b(()=>{x(N,(e(i),a(()=>e(i).name))),x(qe,(e(i),a(()=>e(i).description)))}),n(j,h)}),s(B),n(k,B)};L(ee,k=>{e(ie),a(()=>e(ie)[_])&&k(V)})}s(z),n(P,z)},je=P=>{var z=ke(),w=de(z);{var ee=V=>{var k=ke(),B=de(k);{var j=h=>{var E=Lt(),N=r(E),te=r(N);te.value=te.__value="";var qe=g(te);R(qe,1,()=>(e(v),a(()=>e(v).options)),A,(X,Y,be)=>{var D=Dt(),T=r(D,!0);s(D),D.value=D.__value=be,b(W=>x(T,W),[()=>(e(Y),a(()=>e(Y).join(", ")))]),n(X,D)}),s(N),N.value=N.__value="",s(E),ce("change",N,X=>{const Y=X.target;Y.value&&Fe(_,parseInt(Y.value))}),n(h,E)},i=h=>{var E=Pt();R(E,5,()=>(e(v),a(()=>e(v).options)),A,(N,te,qe)=>{var X=Gt(),Y=r(X);R(Y,5,()=>e(te),A,(be,D)=>{var T=Mt(),W=r(T,!0);s(T),b(()=>x(W,e(D))),n(be,T)}),s(Y),s(X),ce("click",X,()=>Fe(_,qe)),n(N,X)}),s(E),n(h,E)};L(B,h=>{e(v),a(()=>e(v).options.length>3)?h(j):h(i,!1)})}n(V,k)};L(w,V=>{e(v),a(()=>Ye(e(v)))&&V(ee)},!0)}n(P,z)};L(we,P=>{e(v),a(()=>ye(e(v)))?P(Be):P(je,!1)})}s($),b(()=>{x(J,(e(v),a(()=>e(v).name))),x(ne,(e(v),a(()=>e(v).description)))}),n(O,$)}),s(p),b(()=>{me(y,"src",(e(d),a(()=>e(d).image))),me(y,"alt",(e(d),a(()=>e(d).name))),x(F,`${e(d),a(()=>e(d).name)??""} Starting Equipment`)}),n(u,p)};L(c,u=>{e(d),a(()=>!e(d)?.startingEquipment)?u(m):u(q,!1)},!0)}n(t,o)};L(Le,t=>{Q(),a(()=>!Q().class)?t(Ie):t(et,!1)})}var tt=g(Le,2);{var st=t=>{var o=es(),c=r(o),m=r(c),q=g(m,2),u=r(q);s(q),s(c);var p=g(c,2);{var C=M=>{var F=Yt(),U=de(F);{var se=O=>{var v=Ht(),_=g(r(v),2);R(_,5,()=>(e(S),a(()=>e(S).startingEquipment.fixed)),A,($,H)=>{var J=$t(),G=r(J),ne=r(G,!0);s(G),s(J),b(()=>x(ne,e(H))),n($,J)}),s(_),s(v),n(O,v)};L(U,O=>{e(S),a(()=>e(S).startingEquipment.fixed.length>0)&&O(se)})}var ge=g(U,2);R(ge,1,()=>(e(S),a(()=>e(S).startingEquipment.choices)),A,(O,v,_)=>{var $=Xt(),H=r($),J=r(H,!0);s(H);var G=g(H,2),ne=r(G,!0);s(G);var we=g(G,2);{var Be=P=>{var z=Kt(),w=r(z),ee=r(w);ee.value=ee.__value="";var V=g(ee);R(V,1,()=>(e(v),a(()=>e(v).options)),A,(B,j,i)=>{var h=Jt(),E=r(h,!0);s(h),h.value=h.__value=i,b(N=>x(E,N),[()=>(e(j),a(()=>e(j).join(", ")))]),n(B,h)}),s(w);var k;Re(w),s(z),b(()=>{k!==(k=(e(I),a(()=>e(I)[_]??"")))&&(w.value=(w.__value=(e(I),a(()=>e(I)[_]??"")))??"",Ae(w,(e(I),a(()=>e(I)[_]??""))))}),ce("change",w,B=>{const j=B.target;j.value&&De(_,parseInt(j.value))}),n(P,z)},je=P=>{var z=Vt();R(z,5,()=>(e(v),a(()=>e(v).options)),A,(w,ee,V)=>{var k=Ut();let B;var j=r(k);R(j,5,()=>e(ee),A,(i,h)=>{var E=Qt(),N=r(E,!0);s(E),b(()=>x(N,e(h))),n(i,E)}),s(j),s(k),b(i=>B=Ge(k,1,"choice-option svelte-4rxppr",null,B,i),[()=>({selected:e(I)[_]===V})]),ce("click",k,()=>De(_,V)),n(w,k)}),s(z),n(P,z)};L(we,P=>{e(v),a(()=>e(v).options.length>3)?P(Be):P(je,!1)})}s($),b(()=>{x(J,(e(v),a(()=>e(v).name))),x(ne,(e(v),a(()=>e(v).description)))}),n(O,$)}),n(M,F)},y=M=>{var F=It(),U=g(r(F),2);R(U,5,()=>(e(S),a(()=>e(S).equipment)),A,(se,ge)=>{var O=Zt(),v=r(O),_=r(v,!0);s(v),s(O),b(()=>x(_,e(ge))),n(se,O)}),s(U),s(F),n(M,F)};L(p,M=>{e(S),a(()=>e(S).startingEquipment)?M(C):M(y,!1)})}s(o),b(()=>{me(m,"src",(e(S),a(()=>e(S).image))),me(m,"alt",(e(S),a(()=>e(S).name))),x(u,`${e(S),a(()=>e(S).name)??""} Equipment`)}),n(t,o)},at=t=>{var o=ke(),c=de(o);{var m=u=>{var p=ts();n(u,p)},q=u=>{var p=ss(),C=g(r(p),4);s(p),b(()=>me(C,"href",`${We??""}/background`)),n(u,p)};L(c,u=>{Q(),a(()=>Q().background)?u(m):u(q,!1)},!0)}n(t,o)};L(tt,t=>{e(S)?t(st):t(at,!1)})}s(Oe),n($e,Oe),nt(),Ke()}export{bs as component};
