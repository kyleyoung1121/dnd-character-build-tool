import"../chunks/DsnmJJEf.js";import"../chunks/ZZTCqOQ3.js";import{a8 as ie,aD as Rt,aE as ne,a9 as l,aa as r,ab as re,d as t,j as ct,W as _t,aF as Et,ad as a,u as o,ac as g,ae as s,aG as q,aI as kt,aJ as dt}from"../chunks/DOIzd24M.js";import{g as ve,s as h,e as pt}from"../chunks/GyQv_478.js";import{i as M,s as le,a as ce}from"../chunks/AuiCrjz8.js";import{e as D,i as F}from"../chunks/CgRNHZ8z.js";import{s as mt}from"../chunks/BZac2UBV.js";import{s as zt}from"../chunks/B-x1kW5-.js";import{i as Dt,s as Ft}from"../chunks/L01jigut.js";import{i as pe}from"../chunks/BzeKlRg4.js";import{c as Pt}from"../chunks/Bm8aYZib.js";import{a as ft}from"../chunks/CiCzU4bx.js";import{b as Jt}from"../chunks/CK84tweP.js";import{g as ue,w as _e,s as de,e as me,r as fe,p as ge,m as je,d as qe,c as be,a as he,b as Se,f as Ee}from"../chunks/CkyNy_R-.js";import{b as Tt}from"../chunks/C7nbkuFJ.js";var ke=l('<div class="no-selection svelte-jontoi"><h2 class="svelte-jontoi">No Class Selected</h2> <p class="svelte-jontoi">Please select a class first to see starting equipment options.</p> <a class="nav-link svelte-jontoi">Go to Class Selection</a></div>'),Ce=l('<div class="no-equipment svelte-jontoi"><h2 class="svelte-jontoi">Equipment Not Available</h2> <p class="svelte-jontoi"> </p></div>'),ye=l('<div class="equipment-item class-equipment svelte-jontoi"><span class="item-name svelte-jontoi"> </span></div>'),Oe=l('<div class="equipment-group svelte-jontoi"><h3 class="svelte-jontoi">Standard Equipment</h3> <div class="equipment-list svelte-jontoi"></div></div>'),we=l("<button> </button>"),Be=l("<option> </option>"),Ne=l('<div class="weapon-selection"><select class="subchoice-select svelte-jontoi"><option> </option><!></select></div>'),Re=l("<option> </option>"),De=l('<div class="simple-selection"><select class="subchoice-select svelte-jontoi"><option> </option><!></select></div>'),Fe=l('<div class="subchoice-group svelte-jontoi"><h4 class="svelte-jontoi"> </h4> <p class="subchoice-description svelte-jontoi"> </p> <!></div>'),Ae=l('<div class="subchoices-container svelte-jontoi"></div>'),Ge=l('<div class="enhanced-choice svelte-jontoi"><div class="main-options svelte-jontoi"></div> <!></div>'),Le=l("<option> </option>"),Me=l('<div class="dropdown-container svelte-jontoi"><select class="equipment-dropdown svelte-jontoi"><option disabled>Choose an option...</option><!></select></div>'),We=l('<span class="option-item svelte-jontoi"> </span>'),ze=l('<button class="choice-option svelte-jontoi"><div class="option-items svelte-jontoi"></div></button>'),Pe=l('<div class="choice-options svelte-jontoi"></div>'),Je=l('<div class="equipment-group svelte-jontoi"><h3 class="svelte-jontoi"> </h3> <p class="choice-description svelte-jontoi"> </p> <!></div>'),Te=l('<div class="equipment-section svelte-jontoi"><div class="section-header svelte-jontoi"><img class="class-icon svelte-jontoi"/> <h2 class="svelte-jontoi"> </h2></div> <!> <!></div>'),$e=l('<div class="equipment-item background svelte-jontoi"><span class="item-name svelte-jontoi"> </span></div>'),He=l('<div class="equipment-group svelte-jontoi"><h3 class="svelte-jontoi">Fixed Equipment</h3> <div class="equipment-list svelte-jontoi"></div></div>'),Ke=l("<option> </option>"),Qe=l('<div class="dropdown-container svelte-jontoi"><select class="equipment-dropdown svelte-jontoi"><option disabled>Choose an option...</option><!></select></div>'),Ue=l('<span class="option-item svelte-jontoi"> </span>'),Ve=l('<button><div class="option-items svelte-jontoi"></div></button>'),Xe=l('<div class="choice-options svelte-jontoi"></div>'),Ye=l('<div class="equipment-group svelte-jontoi"><h3 class="svelte-jontoi"> </h3> <p class="choice-description svelte-jontoi"> </p> <!></div>'),Ze=l("<!> <!>",1),xe=l('<div class="equipment-item background svelte-jontoi"><span class="item-name svelte-jontoi"> </span></div>'),Ie=l('<div class="equipment-group svelte-jontoi"><h3 class="svelte-jontoi">Background Equipment</h3> <div class="equipment-list svelte-jontoi"></div></div>'),ts=l('<div class="equipment-section svelte-jontoi"><div class="section-header svelte-jontoi"><img class="background-icon svelte-jontoi"/> <h2 class="svelte-jontoi"> </h2></div> <!></div>'),es=l('<div class="equipment-section svelte-jontoi"><h2>Background Equipment</h2> <p>Background equipment data is loading...</p></div>'),ss=l('<div class="no-selection svelte-jontoi"><h2 class="svelte-jontoi">No Background Selected</h2> <p class="svelte-jontoi">Select a background to see additional starting equipment.</p> <a class="nav-link svelte-jontoi">Go to Background Selection</a></div>'),os=l('<div class="main-content svelte-jontoi"><!> <!></div>');function qs($t,Ht){ie(Ht,!1);const[Kt,Qt]=le(),U=()=>ce(Pt,"$character_store",Kt),Ut={Fighter:Ee,Barbarian:Se,Bard:he,Cleric:be,Druid:qe,Monk:je,Paladin:ge,Ranger:fe,Rogue:me,Sorcerer:de,Warlock:_e,Wizard:ue};let d=_t(null),S=_t(null),f=_t({}),I=_t({}),it=_t({}),nt=_t({});function Vt(){if(!t(d)?.startingEquipment?.choices)return;const e=ve(Pt);if(!e._provenance)return;const n={};t(d).startingEquipment.choices.forEach((p,m)=>{const j=`class_equipment_${m}`,u=e._provenance[j];if(u&&yt(p)){const c=u._set||u;if(c.selectedOption!==void 0)n[m]={selectedOption:c.selectedOption,subChoiceSelections:c.subChoiceSelections||{}};else if(c.inventory){const C=c.inventory;for(let y=0;y<p.options.length;y++){const W=p.options[y];if(Xt(W,C)){n[m]={selectedOption:y,subChoiceSelections:Yt(W,C)};break}}}}}),Object.keys(n).length>0&&ct(f,{...t(f),...n})}function Xt(e,n){const p=[];if(e.items&&p.push(...e.items),e.subChoices)for(const m of e.subChoices)p.push(...m.options);return n.every(m=>p.includes(m))}function Yt(e,n){const p={};if(!e.subChoices)return p;for(const m of e.subChoices){const j=n.filter(u=>m.options.includes(u));j.length>0&&(p[m.name]=j)}return p}function yt(e){return"options"in e&&e.options.length>0&&typeof e.options[0]=="object"&&"label"in e.options[0]}function Zt(e){return"options"in e&&e.options.length>0&&Array.isArray(e.options[0])}function At(e,n){if(!t(d))return;const m=t(d).startingEquipment.choices[e].options[n],j=`class_equipment_${e}`;ft(j,{inventory:m})}function xt(e,n){if(!t(d))return;const m=t(d).startingEquipment.choices[e].options[n],j=`class_equipment_${e}`;ft(j,{inventory:[]});const u={...t(f)};u[e]={selectedOption:n,subChoiceSelections:{}},ct(f,u);const c={selectedOption:n,subChoiceSelections:{},inventory:[]};ft(j,c),m.items&&!m.subChoices&&(c.inventory=m.items,ft(j,c))}function Gt(e,n,p){if(!t(d)||!t(f)[e])return;const m=t(d).startingEquipment.choices[e],j=t(f)[e].selectedOption;if(j===void 0)return;const u=m.options[j],c={...t(f)};c[e]={...t(f)[e],subChoiceSelections:{...t(f)[e].subChoiceSelections,[n]:p}},ct(f,c);const C=`class_equipment_${e}`,y={selectedOption:j,subChoiceSelections:c[e].subChoiceSelections,inventory:[]};if(u.subChoices?.every(A=>c[e].subChoiceSelections[A.name]?.length>0)??!0){let A=[];if(u.items&&A.push(...u.items),u.subChoices&&c[e].subChoiceSelections)for(const V of u.subChoices){const st=c[e].subChoiceSelections[V.name];st&&A.push(...st)}y.inventory=A}ft(C,y)}function Lt(e,n){if(!t(S)?.startingEquipment)return;Et(I,t(I)[e]=n);const m=t(S).startingEquipment.choices[e].options[n],j=`background_equipment_${e}`;ft(j,{inventory:m})}Rt(()=>(U(),t(d)),()=>{const e=U().class;ct(d,e?Ut[e]:null),t(d)&&Vt()}),Rt(()=>(U(),Tt),()=>{const e=U().background;ct(S,e&&Tt.find(n=>n.name===e)||null)}),Rt(()=>(t(d),t(f)),()=>{t(d)?.startingEquipment?.choices&&(ct(it,{}),ct(nt,{}),t(d).startingEquipment.choices.forEach((e,n)=>{if(yt(e)&&t(f)[n]?.selectedOption!==void 0){const p=e.options[t(f)[n].selectedOption];Et(it,t(it)[n]=!!(p.subChoices&&p.subChoices.length>0)),Et(nt,t(nt)[n]=p.subChoices||[])}else Et(it,t(it)[n]=!1),Et(nt,t(nt)[n]=[])}))}),ne(),pe();var Ot=os(),Mt=a(Ot);{var It=e=>{var n=ke(),p=g(a(n),4);s(n),q(()=>mt(p,"href",`${Jt??""}/class`)),r(e,n)},te=e=>{var n=kt(),p=dt(n);{var m=u=>{var c=Ce(),C=g(a(c),2),y=a(C);s(C),s(c),q(()=>h(y,`Starting equipment data is not yet available for ${U(),o(()=>U().class)??""}. This will be
				added soon!`)),r(u,c)},j=u=>{var c=Te(),C=a(c),y=a(C),W=g(y,2),A=a(W);s(W),s(C);var V=g(C,2);{var st=O=>{var v=Oe(),_=g(a(v),2);D(_,5,()=>(t(d),o(()=>t(d).startingEquipment.fixed)),F,($,H)=>{var K=ye(),z=a(K),rt=a(z,!0);s(z),s(K),q(()=>h(rt,t(H))),r($,K)}),s(_),s(v),r(O,v)};M(V,O=>{t(d),o(()=>t(d).startingEquipment.fixed.length>0)&&O(st)})}var gt=g(V,2);D(gt,1,()=>(t(d),o(()=>t(d).startingEquipment.choices)),F,(O,v,_)=>{var $=Je(),H=a($),K=a(H,!0);s(H);var z=g(H,2),rt=a(z,!0);s(z);var wt=g(z,2);{var Bt=P=>{var G=Ge(),w=a(G);D(w,5,()=>(t(v),o(()=>t(v).options)),F,(k,B,N)=>{var i=we();let b;var E=a(i,!0);s(i),q(R=>{b=zt(i,1,"choice-option svelte-jontoi",null,b,R),h(E,(t(B),o(()=>t(B).label)))},[()=>({selected:t(f)[_]?.selectedOption===N})]),pt("click",i,()=>xt(_,N)),r(k,i)}),s(w);var tt=g(w,2);{var X=k=>{var B=Ae();D(B,5,()=>(t(nt),o(()=>t(nt)[_])),F,(N,i)=>{var b=Fe(),E=a(b),R=a(E,!0);s(E);var et=g(E,2),jt=a(et,!0);s(et);var Y=g(et,2);{var Z=L=>{var T=Ne(),J=a(T),vt=a(J),bt=a(vt);s(vt),vt.value=vt.__value="";var ht=g(vt);D(ht,1,()=>(t(i),o(()=>t(i).options)),F,(Q,ot)=>{var lt=Be(),Ct=a(lt,!0);s(lt);var at={};q(()=>{h(Ct,t(ot)),at!==(at=t(ot))&&(lt.value=(lt.__value=t(ot))??"")}),r(Q,lt)}),s(J);var x;Dt(J),s(T),q(Q=>{h(bt,`Choose ${Q??""}...`),x!==(x=(t(f),t(i),o(()=>t(f)[_]?.subChoiceSelections?.[t(i).name]?.[0]||"")))&&(J.value=(J.__value=(t(f),t(i),o(()=>t(f)[_]?.subChoiceSelections?.[t(i).name]?.[0]||"")))??"",Ft(J,(t(f),t(i),o(()=>t(f)[_]?.subChoiceSelections?.[t(i).name]?.[0]||""))))},[()=>(t(i),o(()=>t(i).name.toLowerCase()))]),pt("change",J,Q=>{const ot=Q.target;ot.value&&Gt(_,t(i).name,[ot.value])}),r(L,T)},qt=L=>{var T=kt(),J=dt(T);{var vt=bt=>{var ht=De(),x=a(ht),Q=a(x),ot=a(Q);s(Q),Q.value=Q.__value="";var lt=g(Q);D(lt,1,()=>(t(i),o(()=>t(i).options)),F,(at,ut)=>{var St=Re(),ae=a(St,!0);s(St);var Wt={};q(()=>{h(ae,t(ut)),Wt!==(Wt=t(ut))&&(St.value=(St.__value=t(ut))??"")}),r(at,St)}),s(x);var Ct;Dt(x),s(ht),q(at=>{h(ot,`Choose ${at??""}...`),Ct!==(Ct=(t(f),t(i),o(()=>t(f)[_]?.subChoiceSelections?.[t(i).name]?.[0]||"")))&&(x.value=(x.__value=(t(f),t(i),o(()=>t(f)[_]?.subChoiceSelections?.[t(i).name]?.[0]||"")))??"",Ft(x,(t(f),t(i),o(()=>t(f)[_]?.subChoiceSelections?.[t(i).name]?.[0]||""))))},[()=>(t(i),o(()=>t(i).name.toLowerCase()))]),pt("change",x,at=>{const ut=at.target;ut.value&&Gt(_,t(i).name,[ut.value])}),r(bt,ht)};M(J,bt=>{t(i),o(()=>t(i).type==="simple-list")&&bt(vt)},!0)}r(L,T)};M(Y,L=>{t(i),o(()=>t(i).type==="weapon-list")?L(Z):L(qt,!1)})}s(b),q(()=>{h(R,(t(i),o(()=>t(i).name))),h(jt,(t(i),o(()=>t(i).description)))}),r(N,b)}),s(B),r(k,B)};M(tt,k=>{t(it),o(()=>t(it)[_])&&k(X)})}s(G),r(P,G)},Nt=P=>{var G=kt(),w=dt(G);{var tt=X=>{var k=kt(),B=dt(k);{var N=b=>{var E=Me(),R=a(E),et=a(R);et.value=et.__value="";var jt=g(et);D(jt,1,()=>(t(v),o(()=>t(v).options)),F,(Y,Z,qt)=>{var L=Le(),T=a(L,!0);s(L),L.value=L.__value=qt,q(J=>h(T,J),[()=>(t(Z),o(()=>t(Z).join(", ")))]),r(Y,L)}),s(R),R.value=R.__value="",s(E),pt("change",R,Y=>{const Z=Y.target;Z.value&&At(_,parseInt(Z.value))}),r(b,E)},i=b=>{var E=Pe();D(E,5,()=>(t(v),o(()=>t(v).options)),F,(R,et,jt)=>{var Y=ze(),Z=a(Y);D(Z,5,()=>t(et),F,(qt,L)=>{var T=We(),J=a(T,!0);s(T),q(()=>h(J,t(L))),r(qt,T)}),s(Z),s(Y),pt("click",Y,()=>At(_,jt)),r(R,Y)}),s(E),r(b,E)};M(B,b=>{t(v),o(()=>t(v).options.length>3)?b(N):b(i,!1)})}r(X,k)};M(w,X=>{t(v),o(()=>Zt(t(v)))&&X(tt)},!0)}r(P,G)};M(wt,P=>{t(v),o(()=>yt(t(v)))?P(Bt):P(Nt,!1)})}s($),q(()=>{h(K,(t(v),o(()=>t(v).name))),h(rt,(t(v),o(()=>t(v).description)))}),r(O,$)}),s(c),q(()=>{mt(y,"src",(t(d),o(()=>t(d).image))),mt(y,"alt",(t(d),o(()=>t(d).name))),h(A,`${t(d),o(()=>t(d).name)??""} Starting Equipment`)}),r(u,c)};M(p,u=>{t(d),o(()=>!t(d)?.startingEquipment)?u(m):u(j,!1)},!0)}r(e,n)};M(Mt,e=>{U(),o(()=>!U().class)?e(It):e(te,!1)})}var ee=g(Mt,2);{var se=e=>{var n=ts(),p=a(n),m=a(p),j=g(m,2),u=a(j);s(j),s(p);var c=g(p,2);{var C=W=>{var A=Ze(),V=dt(A);{var st=O=>{var v=He(),_=g(a(v),2);D(_,5,()=>(t(S),o(()=>t(S).startingEquipment.fixed)),F,($,H)=>{var K=$e(),z=a(K),rt=a(z,!0);s(z),s(K),q(()=>h(rt,t(H))),r($,K)}),s(_),s(v),r(O,v)};M(V,O=>{t(S),o(()=>t(S).startingEquipment.fixed.length>0)&&O(st)})}var gt=g(V,2);D(gt,1,()=>(t(S),o(()=>t(S).startingEquipment.choices)),F,(O,v,_)=>{var $=Ye(),H=a($),K=a(H,!0);s(H);var z=g(H,2),rt=a(z,!0);s(z);var wt=g(z,2);{var Bt=P=>{var G=Qe(),w=a(G),tt=a(w);tt.value=tt.__value="";var X=g(tt);D(X,1,()=>(t(v),o(()=>t(v).options)),F,(B,N,i)=>{var b=Ke(),E=a(b,!0);s(b),b.value=b.__value=i,q(R=>h(E,R),[()=>(t(N),o(()=>t(N).join(", ")))]),r(B,b)}),s(w);var k;Dt(w),s(G),q(()=>{k!==(k=(t(I),o(()=>t(I)[_]??"")))&&(w.value=(w.__value=(t(I),o(()=>t(I)[_]??"")))??"",Ft(w,(t(I),o(()=>t(I)[_]??""))))}),pt("change",w,B=>{const N=B.target;N.value&&Lt(_,parseInt(N.value))}),r(P,G)},Nt=P=>{var G=Xe();D(G,5,()=>(t(v),o(()=>t(v).options)),F,(w,tt,X)=>{var k=Ve();let B;var N=a(k);D(N,5,()=>t(tt),F,(i,b)=>{var E=Ue(),R=a(E,!0);s(E),q(()=>h(R,t(b))),r(i,E)}),s(N),s(k),q(i=>B=zt(k,1,"choice-option svelte-jontoi",null,B,i),[()=>({selected:t(I)[_]===X})]),pt("click",k,()=>Lt(_,X)),r(w,k)}),s(G),r(P,G)};M(wt,P=>{t(v),o(()=>t(v).options.length>3)?P(Bt):P(Nt,!1)})}s($),q(()=>{h(K,(t(v),o(()=>t(v).name))),h(rt,(t(v),o(()=>t(v).description)))}),r(O,$)}),r(W,A)},y=W=>{var A=Ie(),V=g(a(A),2);D(V,5,()=>(t(S),o(()=>t(S).equipment)),F,(st,gt)=>{var O=xe(),v=a(O),_=a(v,!0);s(v),s(O),q(()=>h(_,t(gt))),r(st,O)}),s(V),s(A),r(W,A)};M(c,W=>{t(S),o(()=>t(S).startingEquipment)?W(C):W(y,!1)})}s(n),q(()=>{mt(m,"src",(t(S),o(()=>t(S).image))),mt(m,"alt",(t(S),o(()=>t(S).name))),h(u,`${t(S),o(()=>t(S).name)??""} Equipment`)}),r(e,n)},oe=e=>{var n=kt(),p=dt(n);{var m=u=>{var c=es();r(u,c)},j=u=>{var c=ss(),C=g(a(c),4);s(c),q(()=>mt(C,"href",`${Jt??""}/background`)),r(u,c)};M(p,u=>{U(),o(()=>U().background)?u(m):u(j,!1)},!0)}r(e,n)};M(ee,e=>{t(S)?e(se):e(oe,!1)})}s(Ot),r($t,Ot),re(),Qt()}export{qs as component};
